
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="VictoryWoo">
    <title>5ì¼ì°¨ [ì•ˆë“œë¡œì´ë“œ] Room - VictoryWoo</title>
    <meta name="author" content="VictoryWoo">
    
    
        <link rel="icon" href="https://woovictory.github.io/assets/images/develop.ico">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"VictoryWoo","sameAs":["https://github.com/WooVictory","https://www.facebook.com/WooVictory","https://www.linkedin.com/profile/","jhsw0375@gmail.com"],"image":"Victory.jpeg"},"articleBody":"[2020.02.11 ê¸°ì¤€ìœ¼ë¡œ ìˆ˜ì •ê³¼ ë™ì‹œì— ë‚´ìš©ì„ ì¶”ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.]\n[2020.03.27 ê¸°ì¤€ìœ¼ë¡œ ê¸€ì„ ìƒˆë¡­ê²Œ ì‘ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ìƒˆë¡œ ì‘ì„±ë˜ëŠ” í¬ìŠ¤íŒ…ì´ ì™„ë£Œë˜ë©´ í•´ë‹¹ í¬ìŠ¤íŒ…ì€ ì‚­ì œë  ì˜ˆì •ì…ë‹ˆë‹¤.]\nì‘ì„±ì¤‘ì¸ ê¸€ : Room ê°œë…í¸\n[2020.04.25 ê¸°ì¤€ í™ë³´ ë‚´ìš© ì¶”ê°€]\ní˜„ì¬ ì‹ ì… ê°œë°œìë¥¼ ìœ„í•œ Repositoryë¥¼ ìš´ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ğŸ’» ì‹ ì… ê°œë°œìë¡œì„œ ì¤€ë¹„ë¥¼ í•˜ê¸° ìœ„í•´ ì§€ì‹ì„ ì •ë¦¬í•˜ëŠ” ê³µê°„ ğŸ‘¨â€ğŸ’»ì´ë©°, ìš´ì˜ì²´ì œ, ìë°”, ë„¤íŠ¸ì›Œí¬, ë°ì´í„°ë² ì´ìŠ¤ ë“±ì˜ ë‚´ìš©ì´ ì •ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê³„ì†í•´ì„œ ê¾¸ì¤€íˆ ì¶”ê°€ ì¤‘ì´ë‹ˆ í•œë²ˆì”© ë“¤ëŸ¬ì„œ ë´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤. ë˜í•œ, ë„ì›€ì´ ëœë‹¤ë©´ Starë¥¼ ê¾¹~ ëˆŒëŸ¬ì£¼ì‹œë©´ ì €ì—ê²Œ í° í˜ì´ ë©ë‹ˆë‹¤ :)\nAndroid Architecture Component ì¤‘ í•˜ë‚˜ì¸ Roomì— ëŒ€í•´ ì•Œì•„ë³´ë ¤ê³  í•œë‹¤.\n[ORM]\nRoomì„ ì•Œì•„ë³´ê¸° ì „ì— ORMì´ ë¬´ì—‡ì¸ì§€ ì‚´í´ë³´ì. ORMì´ë€ Object Relational Mappingìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì™€ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ê°„ì˜ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ë°ì´í„°ë¥¼ ë³€í™˜í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ê¸°ë²•ìœ¼ë¡œ DB í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ëŠ” ê°ì²´ë¥¼ ë§Œë“¤ê³  ê·¸ ê°ì²´ì—ì„œ DBë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.\n[Room]\nRoomì€ SQLiteì˜ ê¸°ëŠ¥ì„ ìµœëŒ€í•œ í™œìš©í•˜ëŠ” ë™ì‹œì— ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì›í™œí•˜ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ SQLite ìœ„ì— ì¶”ìƒí™” ê³„ì¸µì„ ì œê³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.\n\nì ì€ ì–‘ì˜ ì •í˜•í™”ëœ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë¡œì»¬ì—ì„œ í•´ë‹¹ ë°ì´í„°ë¥¼ ìœ ì§€í•¨ìœ¼ë¡œì¨ í° ì´ì ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\nex) ê´€ë ¨ ë°ì´í„°ë¥¼ ìºì‹œí•˜ëŠ” ê²ƒ\n\n\nì´ë ‡ê²Œ í•˜ë©´ ì¥ì¹˜ê°€ ë„¤íŠ¸ì›Œí¬ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë„ ì‚¬ìš©ìê°€ ì˜¤í”„ë¼ì¸ ìƒíƒœì¼ ë•Œ í•´ë‹¹ ì½˜í…ì¸ ë¥¼ ê³„ì† íƒìƒ‰í•  ìˆ˜ ìˆë‹¤. ì´í›„ì— ì¥ì¹˜ê°€ ë‹¤ì‹œ ì˜¨ë¼ì¸ ìƒíƒœê°€ ë˜ë©´ ì‚¬ìš©ìê°€ ì‹œì‘í•œ ëª¨ë“  ì½˜í…ì¸  ë³€ê²½ ë‚´ìš©ì´ ì„œë²„ì— ë™ê¸°í™”ëœë‹¤.\n\n[ì‚¬ìš©í•´ë³´ê¸°]\n\ngradleì— ì˜ì¡´ì„±ì„ ì¶”ê°€í•œë‹¤.\n\n\në¨¼ì €, build.gradle íŒŒì¼ì˜ dependenciesì— ì¶”ê°€í•´ì¤€ë‹¤.ê·¸ë˜ì•¼ì§€ Roomì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\nroomVersionì€ ì‚¬ìš©í•˜ëŠ” ì‹œì ì— ë§ëŠ” ë²„ì „ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.\n\n123//roomimplementation \"android.arch.persistence.room:runtime:$roomVersion\"kapt \"android.arch.persistence.room:compiler:$roomVersion\"\n[3ê°€ì§€ ì£¼ìš” ì»´í¬ë„ŒíŠ¸]\nRoomì€ ì—”í‹°í‹°(Entity), ë°ì´í„° ì ‘ê·¼ ê°ì²´(Data Access Object), ë£¸ ë°ì´í„° ë² ì´ìŠ¤(Room Database) ì´ë ‡ê²Œ ì´ 3ê°€ì§€ êµ¬ì„±ìš”ì†Œë¡œ ë‚˜ë‰œë‹¤.\n\nDatabase\n\n\në°ì´í„°ë² ì´ìŠ¤ í™€ë”ë¥¼ í¬í•¨í•˜ê³  ì•±ì˜ ì§€ì†ì ì´ê³  ê´€ê³„ê°€ ìˆëŠ” ë°ì´í„°ì— ëŒ€í•œ ê¸°ë³¸ ì—°ê²°ì„ ìœ„í•œ ê¸°ë³¸ ì•¡ì„¸ìŠ¤ ì§€ì  ì—­í• ì„ í•œë‹¤.\n@Databaseë¡œ ì–´ë…¸í…Œì´ì…˜ëœ í´ë˜ìŠ¤ëŠ” ë‹¤ìŒì˜ ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ í•œë‹¤.\n\nRoomDatabaseë¥¼ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì´ì–´ì•¼ í•œë‹¤.\nì–´ë…¸í…Œì´ì…˜ ë‚´ì— ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ê´€ëœ (ì¦‰, ë°ì´í„°ë² ì´ìŠ¤ì— ë“¤ì–´ê°ˆ í…Œì´ë¸”) ì—”í‹°í‹°ì˜ ëª©ë¡ì„ í¬í•¨í•œë‹¤.\níŒŒë¼ë¯¸í„°ê°€ 0ê°œì¸ ì¶”ìƒ ë©”ì†Œë“œë¥¼ í¬í•¨í•˜ê³  @Daoë¡œ ì–´ë…¸í…Œì´ì…˜ëœ í´ë˜ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.\n\n\nëŸ°íƒ€ì„ì— Room.databaseBuilder() ë˜ëŠ” Room.inMemoryDatabaseBuilder()ë¥¼ í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n12345678910// User and Book are classes annotated with @Entity.@Database(version = 1, entities = &#123;User.class, Book.class&#125;)abstract class AppDatabase extends RoomDatabase()&#123;    // BookDao is a class annotated with @Dao.     abstract public BookDao bookDao();     // UserDao is a class annotated with @Dao.     abstract public UserDao userDao();     // UserBookDao is a class annotated with @Dao.     abstract public UserBookDao userBookDao();&#125;\n\në°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì‹¤í–‰í•˜ëŠ” ëŒ€ì‹  Dao í´ë˜ìŠ¤ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ë‹¤. Dao í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ë³´ë‹¤ ë…¼ë¦¬ì ì¸ ê³„ì¸µì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ í†µì‹ ì„ ì¶”ìƒí™”í•  ìˆ˜ ìˆë‹¤. ì´ ê³„ì¸µì€ ì§ì ‘ sql ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì— ë¹„í•´ í…ŒìŠ¤íŠ¸ë¥¼ ë” ì‰½ê²Œ í•  ìˆ˜ ìˆë‹¤.\nRoomì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì»´íŒŒì¼ ë˜ëŠ” ë™ì•ˆ Dao í´ë˜ìŠ¤ì˜ ëª¨ë“  ì¿¼ë¦¬ë¥¼ í™•ì¸í•˜ì—¬ ì¿¼ë¦¬ ì¤‘ ë¬¸ì œê°€ ìˆëŠ” ê²½ìš° ì¦‰ì‹œ ì‚¬ìš©ìì—ê²Œ ì•Œë ¤ì¤€ë‹¤.\n\n\nEntity\n\n\në°ì´í„°ë² ì´ìŠ¤ ë‚´ì—ì„œ í…Œì´ë¸”ì„ ë‚˜íƒ€ë‚¸ë‹¤.\nroomì„ ì‚¬ìš©í•  ë•Œ ê´€ë ¨ í•„ë“œ ì§‘í•©ì„ ì—”í‹°í‹°ë“¤ë¡œ ì •ì˜í•œë‹¤.\nê° ì—”í‹°í‹°ì— ëŒ€í•´ í•­ëª©(ì•„ì´í…œ)ì„ ë³´ê´€í•˜ê¸° ìœ„í•´ ì—°ê²°ëœ ë°ì´í„°ë² ì´ìŠ¤ ê°ì²´ ë‚´ì— í…Œì´ë¸”ì´ ìƒì„±ëœë‹¤.\në°ì´í„°ë² ì´ìŠ¤ í´ë˜ìŠ¤ì˜ ì—”í‹°í‹° arrayë¥¼ í†µí•´ ì—”í‹°í‹° í´ë˜ìŠ¤ë¥¼ ì°¸ì¡°í•´ì•¼ í•œë‹¤.\n\n12345678@Entitypublic class User&#123;    @PrimaryKey    public int id;    public String firstName;    public String lastName;&#125;\n\ní•„ë“œë¥¼ ìœ ì§€í•˜ë ¤ë©´, ë£¸ì€ í•„ë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.\ní•„ë“œë¥¼ publicìœ¼ë¡œ ë§Œë“¤ê±°ë‚˜, getter / setterë¥¼ ì œê³µí•  ìˆ˜ ìˆë‹¤.\ngetter / setter methodë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ë£¸ì—ì„œ JavaBeans ê·œì¹™ì„ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤.[ë©¤ë²„ ë³€ìˆ˜ëŠ” privateí˜•ì„ ì§€ì •í•˜ì—¬ ì„ ì–¸í•œë‹¤.]\n\n\nì£¼ì˜\n\nì—”í‹°í‹°ì—ëŠ” ë¹ˆ ìƒì„±ì (í•´ë‹¹ DAO í´ë˜ìŠ¤ê°€ ê° ì§€ì† í•„ë“œë¥¼ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ê²½ìš°) ë˜ëŠ” ë§¤ê°œ ë³€ìˆ˜ì— ì—”í‹°í‹° í•„ë“œì™€ ì¼ì¹˜í•˜ëŠ” ìœ í˜•ê³¼ ì´ë¦„ì´ í¬í•¨ëœ ìƒì„±ìê°€ ìˆì„ ìˆ˜ ìˆë‹¤. ë£¸ì€ ì¼ë¶€ í•„ë“œë§Œ ìˆ˜ì‹ í•˜ëŠ” ìƒì„±ìì™€ ê°™ì´ ì „ì²´ ë˜ëŠ” ë¶€ë¶„ ìƒì„±ìë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.\nUser a Primary Key\n\nê° EntityëŠ” ìµœì†Œ í•˜ë‚˜ ì´ìƒì˜ í•„ë“œë¥¼ ê¸°ë³¸í‚¤ë¡œ ì§€ì •í•´ì•¼ í•œë‹¤.\ní•„ë“œê°€ í•˜ë‚˜ë§Œ ìˆëŠ” ê²½ìš°ì—ë„ @PrimaryKey ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ í•„ë“œì— ì£¼ì„ì„ ë‹¬ í•„ìš”ê°€ ìˆë‹¤.\në˜í•œ, ë£¸ì—ì„œ ì—”í‹°í‹°ì— ìë™ìœ¼ë¡œ IDë¥¼ í• ë‹¹í•˜ë„ë¡ í•˜ë ¤ë©´ @PrimaryKeyì˜ autoGenerate ì†ì„±ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.(ê¸°ë³¸ì€ false. ex: indexê°€ ìë™ìœ¼ë¡œ ì¦ê°€í•˜ëŠ” ê²½ìš°ì™€ ê°™ì€)\nì—”í‹°í‹°ê°€ ë³µí•© PrimaryKeyê°€ ìˆëŠ” ê²½ìš° @Entity ì–´ë…¸í…Œì´ì…˜ì˜ primaryKeys ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\n12345@Entity(primaryKeys = &#123;\"firstName\", \"lastName\"&#125;)public class User&#123;    public String firstName;    public String lastName;&#125;\n\nê¸°ë³¸ì ìœ¼ë¡œ ë£¸ì€ í´ë˜ìŠ¤ ì´ë¦„ì„ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.\në§Œì•½ í…Œì´ë¸”ì´ ë‹¤ë¥¸ ì´ë¦„ì„ ê°€ì§€ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´, @Entity ì–´ë…¸í…Œì´ì…˜ì˜ tableName ì†ì„±ì„ ì„¤ì •í•˜ë©´ ëœë‹¤.\n\n1234@Entity(tableName = \"users\")public class User&#123;    ///&#125;\n\nì£¼ì˜ : SQLiteì˜ í…Œì´ë¸” ì´ë¦„ì€ ëŒ€ì†Œë¬¸ìë¥¼ êµ¬ë¶„í•˜ì§€ ì•ŠëŠ”ë‹¤.\n\n\ntableName ì†ì„±ê³¼ ë¹„ìŠ·í•˜ê²Œ ë£¸ì€ í•„ë“œ ì´ë¦„ì„ ë°ì´í„°ë² ì´ìŠ¤ì˜ column ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.\në§Œì•½ column ì´ë¦„ì„ ë‹¤ë¥´ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´ @ColumnInfo ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ë©´ ëœë‹¤.\n\n1234567891011@Entity(tableName = \"users\")public class User&#123;    @PrimaryKey    public int id;    @ColumnInfo(name = \"first_name\")    public String firstName;    @ColumnInfo(name = \"last_name\")    public String lastName;&#125;\nIgnore fields\n\nê¸°ë³¸ì ìœ¼ë¡œ ë£¸ì€ ì—”í‹°í‹°ì— ì •ì˜ëœ ê° í•„ë“œì— ëŒ€í•œ Columnì„ ìƒì„±í•œë‹¤.\nì—”í‹°í‹°ì— ì§€ì†í•˜ê³  ì‹¶ì§€ ì•Šì€ í•„ë“œê°€ ìˆëŠ” ê²½ìš° @Ignoreë¥¼ ì‚¬ìš©í•˜ì—¬ í•„ë“œì— ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.\n\n123456789101112@Entity(tableName = \"users\")public class User&#123;    @PrimaryKey    public int id;    public String firstName;    public String lastName;    @Ignore    Bitmap picture;&#125;\n\nìƒìœ„ ì—”í‹°í‹°ì—ì„œ í•„ë“œë¥¼ ìƒì†í•˜ëŠ” ê²½ìš°, ì¼ë°˜ì ìœ¼ë¡œ @Entity íŠ¹ì„±ì˜ ignoredColumns ì†ì„±ì„ ë” ì‰½ê²Œ ì¶”ê°€í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\n1234567@Entity(ignoredColumns = \"picture\")public class RemoteUser extends User &#123;    @PrimaryKey    public int id;    public boolean hasVpn;&#125;\nProvide table search support\nì¶”ê°€ ì˜ˆì •~~\n\nDAO(Data Access Object)\n\n\në°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œë¥¼ í¬í•¨í•˜ë©°, ë°ì´í„° ì ‘ê·¼ ê°ì²´ì´ë‹¤.\nì¸í„°í˜ì´ìŠ¤ë¡œì„œ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œë¥¼ ì •ì˜í•œë‹¤.\në£¸ì„ ì‚¬ìš©í•´ ì•±ì˜ ë°ì´í„°ì— ì ‘ê·¼í•˜ë ¤ë©´ DAOë¥¼ ì‚¬ìš©í•œë‹¤.\nê° DAOì—ëŠ” ì•±ì˜ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì¶”ìƒì  ì•¡ì„¸ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ë°©ë²•ì´ í¬í•¨ë˜ì–´ ìˆìœ¼ë¯€ë¡œ(interfaceë‚´ì— ì¿¼ë¦¬ì™€ í•¨ê»˜ í•¨ìˆ˜ë§Œ ì •ì˜) ì´ Dao ê°ì²´ë“¤ì€ ë£¸ì˜ ì£¼ìš” êµ¬ì„±ìš”ì†Œë¥¼ í˜•ì„±í•œë‹¤.\nì¿¼ë¦¬ builderë‚˜ ì§ì ‘ì ì¸ ì¿¼ë¦¬ ëŒ€ì‹  DAO í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ì˜ ë‹¤ì–‘í•œ êµ¬ì„± ìš”ì†Œë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.\në˜í•œ, DAOë¥¼ ì‚¬ìš©í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í…ŒìŠ¤íŠ¸í•  ë•Œ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆë‹¤.\nDAOëŠ” ì¸í„°í˜ì´ìŠ¤ ë˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì¼ ìˆ˜ ìˆë‹¤.\n\nì¶”ìƒ í´ë˜ìŠ¤ì¸ ê²½ìš° ì„ íƒì ìœ¼ë¡œ RoomDatabaseë¥¼ ìœ ì¼í•œ ë§¤ê°œ ë³€ìˆ˜ë¡œ ì‚¬ìš©í•˜ëŠ” ìƒì„±ìë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.\nRoomì€ Compile timeì— ê° DAO êµ¬í˜„ì„ ìƒì„±í•œë‹¤.\n\n\n\nDefine methods for convenience\n\nDAO í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ê°€ì§€ í¸ë¦¬í•œ ì¿¼ë¦¬ê°€ ìˆë‹¤.\n\n1. Insert\n\nDAO ë©”ì†Œë“œë¥¼ ì‘ì„±í•˜ê³  @Insertë¡œ ì–´ë…¸í…Œì´ì…˜ì„ ì§€ì •í•  ë•Œ, Roomì€ ë‹¨ì¼ íŠ¸ëœì­ì…˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ì— ëª¨ë“  ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚½ì…í•˜ëŠ” êµ¬í˜„ì„ ìƒì„±í•œë‹¤.\n\n1234567891011@Daopublic interface MyDao&#123;    @Insert(onConflict = OnConflictStrategy.REPLACE)    public void insertUsers(User... users);     @Insert    public void insertBothUsers(User user1, User user2);    @Insert    public void insertUsersAndFriends(User user, List&lt;User&gt; friends);&#125;\n\n@Insert ë©”ì†Œë“œëŠ” ë§¤ê°œ ë³€ìˆ˜ë¥¼ 1ê°œë§Œ ë°›ìœ¼ë©´ ì‚½ì…ëœ í•­ëª©ì˜ ìƒˆ rowIdì¸ long íƒ€ì…ì˜ ê°’ì„ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤. ë§¤ê°œë³€ìˆ˜ê°€ ë°°ì—´ ë˜ëŠ” ì§‘í•©ì¸ ê²½ìš° Long[] ë˜ëŠ” Listì„ ëŒ€ì‹  ë°˜í™˜í•´ì•¼ í•œë‹¤.\n@Insertì— onConflict ì†ì„±ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.  í…Œì´ë¸”ì— Entityë¥¼ ì‚½ì…í•  ë•Œ ê°™ì€ ê°’ì¸ ê²½ìš°, ì¶©ëŒì´ ë°œìƒí•˜ëŠ”ë° ì´ ì¶©ëŒì„ ì–´ë–»ê²Œ í•´ê²°í• ì§€ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.\n\nìœ„ì—ì„œëŠ” Replaceë¡œ ì§€ì •í•˜ì—¬ ì¶©ëŒ ë°œìƒ ì‹œ ìƒˆë¡œ ë“¤ì–´ì˜¨ ë°ì´í„°ë¡œ êµì²´í•œë‹¤.\n\n\n\n2. update\n\nupdate ë°©ë²•ì€ í…Œì´í„°ë² ì´ìŠ¤ì—ì„œ ë§¤ê°œ ë³€ìˆ˜ë¡œ ì§€ì •ëœ ì—”í‹°í‹° ì§‘í•©ì„ ìˆ˜ì •í•œë‹¤. ê° ì—”í‹°í‹°ì˜ ê¸°ë³¸ í‚¤ì™€ ì¼ì¹˜í•˜ëŠ” ì¡°íšŒë¥¼ ì‚¬ìš©í•œë‹¤.\n\n12345@Daopublic interface MyDao &#123;    @Update    public void updateUsers(User... users);&#125;\n\nì¼ë°˜ì ìœ¼ë¡œ í•„ìš”í•˜ì§„ ì•Šì§€ë§Œ, updateë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì—…ë°ì´íŠ¸ëœ í–‰ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” int ê°’ì„ ë°˜í™˜í•  ë°›ì„ ìˆ˜ ìˆë‹¤.\n\n3. Delete\n\nDelete ë°©ë²•ì€ ë§¤ê°œ ë³€ìˆ˜ë¡œ ì§€ì •ëœ ì—”í‹°í‹° ì§‘í•©ì„ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì œê±°í•œë‹¤. ê¸°ë³¸í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚­ì œí•  ì—”í‹°í‹°ë¥¼ ì°¾ëŠ”ë‹¤.\n\n12345@Daopublic interface MyDao&#123;    @Delete    public void deleteusers(User... users);&#125;\n\nupdateì™€ ë¹„ìŠ·í•˜ê²Œ ì‚­ì œë¥¼ í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì œê±°ëœ í–‰ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” int ê°’ì„ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.\n\n4. Query\n\n@QueryëŠ” DAO í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì£¼ì„ì´ë‹¤.\në°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì½ê¸° / ì“°ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\nê° @Query ë©”ì†Œë“œëŠ” Compile timeì— í™•ì¸ë˜ë¯€ë¡œ ì¿¼ë¦¬ì— ë¬¸ì œê°€ ìˆìœ¼ë©´ Runtim Error ëŒ€ì‹  Compile Errorê°€ ë°œìƒí•œë‹¤.\në˜í•œ, ë£¸ì€ ë°˜í™˜ëœ ê°ì²´ì˜ í•„ë“œ ì´ë¦„ì´ ì¿¼ë¦¬ ì‘ë‹µì˜ í•´ë‹¹ ì—´ ì´ë¦„ê³¼ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë£¸ì€ ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ë²• ì¤‘ í•˜ë‚˜ë¡œ ê²½ê³ ë¥¼ í‘œì‹œí•œë‹¤.\n\nì¼ë¶€ í•„ë“œ ì´ë¦„ë§Œ ì¼ì¹˜í•˜ëŠ” ê²½ìš° ê²½ê³ ë¥¼ í‘œì‹œí•œë‹¤.\ní•„ë“œ ì´ë¦„ì´ ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.\n\n\n\n12345@Daopublic interface MyDao&#123;    @Query(\"SELECT * FROM user\")    public User[] loadAllUsers();&#125;\n\nëª¨ë“  ì‚¬ìš©ìë¥¼ loadí•˜ëŠ” ê°„ë‹¨í•œ ì¿¼ë¦¬ì´ë‹¤.\nCompile timeì— ë£¸ì€ ì‚¬ìš©ì í…Œì´ë¸”ì˜ ëª¨ë“  Columnì„ ì¿¼ë¦¬í•œë‹¤ëŠ” ê²ƒì„ ì•Œê³  ìˆë‹¤. ì¿¼ë¦¬ì— êµ¬ë¬¸ ì˜¤ë¥˜ê°€ ìˆê±°ë‚˜ ì‚¬ìš©ì í…Œì´ë¸”ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ì—†ëŠ” ê²½ìš°, Roomì€ ì•± ì»´íŒŒì¼ ì‹œ ì ì ˆí•œ ë©”ì‹œì§€ê°€ í¬í•¨ëœ ì˜¤ë¥˜ë¥¼ í‘œì‹œí•œë‹¤.\n\n5. Passing parameters into the query\n\nëŒ€ë¶€ë¶„ì˜ ê²½ìš° íŠ¹ì • ì—°ë ¹ë³´ë‹¤ ë‚˜ì´ê°€ ë§ì€ ì‚¬ìš©ìë§Œ í‘œì‹œí•˜ëŠ” ë“±ì˜ í•„í„°ë§ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë ¤ë©´ ë§¤ê°œ ë³€ìˆ˜ë¥¼ ì¿¼ë¦¬ì— ì „ë‹¬í•´ì•¼ í•œë‹¤.\në‹¤ìŒì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n12345@Daopublic interface MyDao&#123;    @Query(\"SELECT * FROM user WHERE age &gt; :minAge\")    public User[] loadAllUsersOlderThan(int minAge);&#125;\n\nì´ ì¿¼ë¦¬ë¥¼ ì»´íŒŒì¼í•  ë•Œ, Roomì€ :minAge bind ë§¤ê°œ ë³€ìˆ˜ì™€ minAge ë©”ì†Œë“œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¼ì¹˜ì‹œí‚¨ë‹¤. Roomì€ ë§¤ê°œ ë³€ìˆ˜ ì´ë¦„ì„ ì‚¬ìš©í•˜ì—¬ ë§¤ì¹˜ë¥¼ ìˆ˜í–‰í•œë‹¤. ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš° ì•± ì»´íŒŒì¼ ì‹œ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.\në‹¤ìŒê³¼ ê°™ì´ ì—¬ëŸ¬ ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬í•˜ê±°ë‚˜ ì¡°íšŒì—ì„œ ì—¬ëŸ¬ ë²ˆ ì°¸ì¡°í•  ìˆ˜ë„ ìˆë‹¤.\n\n123456789@Daopublic interface MyDao &#123;    @Query(\"SELECT * FROM user WHERE age BETWEEN :minAge AND :maxAge\")    public User[] loadAllUsersBetweenAges(int minAge, int maxAge);    @Query(\"SELECT * FROM user WHERE first_name LIKE :search \" +           \"OR last_name LIKE :search\")    public List&lt;User&gt; findUserWithName(String search);&#125;\n6. Returning subsets of columns\n\nëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì—”í‹°í‹°ì˜ ëª‡ ê°€ì§€ í•„ë“œë§Œ ìˆìœ¼ë©´ ëœë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ UIëŠ” ì‚¬ìš©ìì— ëŒ€í•œ ëª¨ë“  ì„¸ë¶€ ì •ë³´ê°€ ì•„ë‹ˆë¼ ì‚¬ìš©ìì˜ ì„±ê³¼ ì´ë¦„ë§Œ í‘œì‹œí•  ìˆ˜ ìˆë‹¤. ì•±ì˜ UIì— í‘œì‹œë˜ëŠ” ì—´ë§Œ ê°€ì ¸ì˜¤ë©´ ë¦¬ì†ŒìŠ¤ê°€ ì ˆì•½ë˜ê³  ì¿¼ë¦¬ê°€ ë” ë¹¨ë¦¬ ì™„ë£Œëœë‹¤.\nRoomì„ ì‚¬ìš©í•˜ë©´ ê²°ê³¼ Column ì§‘í•©ì„ ë°˜í™˜ë  ê°œì²´ë¡œ ë§¤í•‘í•  ìˆ˜ ìˆëŠ” ì¿¼ë¦¬ì—ì„œ Java ê¸°ë°˜ ê°œì²´ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.\n\n12345678// Java Objectpublic class NameTuple &#123;    @ColumnInfo(name = \"first_name\")    public String firstName;    @ColumnInfo(name = \"last_name\")    public String lastName;&#125;\n\nQuery ë©”ì†Œë“œì—ì„œ ì´ ìë°” ê°ì²´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\n12345@Daopublic interface MyDao&#123;    @Query(\"SELECT first_name, last_name FROM user\")    public List&lt;NameTuple&gt; loadFullName();&#125;\n\nRoomì€ ì¿¼ë¦¬ê°€ first_name, last_name ì—´ì— ëŒ€í•œ ê°’ì„ ë°˜í™˜í•˜ê³  ì´ëŸ¬í•œ ê°’ì„ NameTuple í´ë˜ìŠ¤ì˜ í•„ë“œì— ë§¤í•‘í•  ìˆ˜ ìˆìŒì„ ì´í•´í•œë‹¤.\në”°ë¼ì„œ ë£¸ì—ì„œ ì ì ˆí•œ ì½”ë“œë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.\nì¿¼ë¦¬ê°€ ë„ˆë¬´ ë§ì€ ì—´ì„ ë°˜í™˜í•˜ê±°ë‚˜ NameTuple í´ë˜ìŠ¤ì— ì—†ëŠ” ì—´ì„ ë°˜í™˜í•˜ë©´ ë£¸ì— ê²½ê³ ê°€ í‘œì‹œëœë‹¤.\n\n7. Passing a collection of arguments\n\nì¼ë¶€ ì¿¼ë¦¬ëŠ” ëŸ°íƒ€ì„ê¹Œì§€ ì•Œ ìˆ˜ ì—†ëŠ” ì •í™•í•œ ìˆ˜ì˜ ë§¤ê°œ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§ì€ ë§¤ê°œ ë³€ìˆ˜ë¥¼ ì „ë‹¬í•´ì•¼ í•  ìˆ˜ ìˆë‹¤.\nì˜ˆë¥¼ ë“¤ì–´, regionsì˜ í•˜ìœ„ ì§‘í•©ì—ì„œ ëª¨ë“  ì‚¬ìš©ìì— ëŒ€í•œ ì •ë³´ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆë‹¤.\nRoomì€ ë§¤ê°œë³€ìˆ˜ê°€ ì§‘í•©ì„ ë‚˜íƒ€ë‚´ëŠ” ì‹œì ì„ íŒŒì•…í•˜ê³  ì œê³µëœ ë§¤ê°œë³€ìˆ˜ ìˆ˜ì— ë”°ë¼ ëŸ°íƒ€ì„ì— ë§¤ê°œë³€ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ í™•ì¥í•œë‹¤.\n\n12345@Daopublic interface MyDao &#123;    @Query(\"SELECT first_name, last_name FROM user WHERE region IN (:regions)\")    public List&lt;NameTuple&gt; loadUsersFromRegions(List&lt;String&gt; regions);&#125;\n8. Observable queries\n\nì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•˜ë©° ë°ì´í„°ê°€ ë³€ê²½ë  ë•Œ ì•±ì˜ UIê°€ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ë˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.\nì´ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ì¿¼ë¦¬ ë©”ì†Œë“œ descriptionì— LiveData ìœ í˜•ì˜ ë°˜í™˜ ê°’ì„ ì‚¬ìš©í•œë‹¤.\nRoomì€ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì—…ë°ì´íŠ¸ë  ë•Œ LiveDataë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ”ë° í•„ìš”í•œ ëª¨ë“  ì½”ë“œë¥¼ ìƒì„±í•œë‹¤.\n\n12345@Daopublic interface MyDao&#123;    @Query(\"SELECT first_name, last_name FROM user WHEHE region IN (:regions)\")    public LiveData&lt;List&lt;User&gt;&gt; loadUserFromRegionsSync(List&lt;String&gt; regions);&#125;\n9. Reactive queries with RxJava\nì¶”ê°€ ì˜ˆì •~~\n[ì—°ìŠµí•´ë³´ê¸°]\n\nEntity : databaseì˜ rowì™€ mappingë˜ëŠ” class. ì¦‰, tableì˜ êµ¬ì¡°ë¥¼ ë‚˜íƒ€ë‚´ëŠ”ë° Databaseì—ì„œ entities í•¨ìˆ˜ë¥¼ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.\n\n@Ignoreë¥¼ ë¶™ì´ì§€ ì•ŠëŠ”í•œ DBì— ì§€ì†ì ìœ¼ë¡œ ìœ ì§€ëœë‹¤.\nentityëŠ” empty ìƒì„±ìë‚˜, ë¶€ë¶„ fieldë§Œ ê°–ëŠ” ìƒì„±ì, full fieldì— ëŒ€í•œ ìƒì„±ì ëª¨ë‘ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.\n\nDAO : databaseë¥¼ ì ‘ê·¼í•˜ëŠ” í•¨ìˆ˜ë“¤ì´ ì •ì˜ë˜ëŠ” class or interfaceì´ë‹¤. @Databaseë¡œ ì •ì˜ëœ classëŠ” ë‚´ë¶€ì— ì¸ìê°€ ì—†ê³  @Dao annotationì´ ë˜ì–´ ìˆëŠ” classë¥¼ returní•˜ëŠ” abstract í•¨ìˆ˜ë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤.\n\nì•„ë˜ì˜ ì˜ˆì œëŠ” í•˜ë‚˜ì˜ entityì™€ í•˜ë‚˜ì˜ Daoë¥¼ ê°–ëŠ” í˜•íƒœì´ë‹¤.\n1234567891011121314// User.java@Entitypublic class User&#123;    @PrimaryKey    private int uid;    @ColumnInfo(name = \"first_name\")    private String firstName;    @ColumnInfo(name = \"last_name\")    private String lastName;    // ìƒëµ&#125;\n123456789101112131415161718// UserDao.java@Daopublic interface UserDao&#123;    @Query(\"SELECT * FROM user\")     List&lt;User&gt; getAll();         @Query(\"SELECT * FROM user WHERE uid IN (:userIds)\")     List&lt;User&gt; loadAllByIds(int[] userIds);        @Query(\"SELECT * FROM user WHERE first_name LIKE :first AND \" + \"last_name LIKE :last LIMIT 1\")     User findByName(String first, String last);         @Insert void     insertAll(User... users);         @Delete void     delete(User user);&#125;\n12345// AppDatabase.java@Database(entities = &#123;User.class&#125;, version = 1)public abstract class AppDatabase extends RoomDatabase&#123;    public abstract UserDao userDao();&#125;\n\nìœ„ 3ê°œì˜ classê°€ ì™„ì„±ë˜ë©´ ì•„ë˜ì™€ ê°™ì´ DBì˜ instanceë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n1AppDatabase db = Roo.databaseBuilder(getApplicationContext(), AppDatabase.class, \"database-name\").build();\nAppDatabase objectë¥¼ ìƒì„±í•˜ëŠ” ì½”ë“œëŠ” ë¹„ìš©ì´ ë§ì´ ë“¤ê¸° ë•Œë¬¸ì— ì‹±ê¸€í†¤ìœ¼ë¡œ êµ¬í˜„í•´ì•¼ í•œë‹¤.\nEntities\n@Databaseì˜ annotationì— ì†ì„±ìœ¼ë¡œ í¬í•¨ëœ entitiyëŠ” ì‹¤ì œ @Entity annotationì„ ë¶™ì¸ classë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì´ëŠ” ê° tableë¡œ ìƒì„±ë˜ë©°, ì‹¤ì œ columeìœ¼ë¡œ ë§Œë“¤ê³  ì‹¶ì§€ ì•Šì€ fieldê°€ ìˆë‹¤ë©´ @Ignoreë¥¼ ë¶™ì¸ë‹¤.\n1234567891011@Entityclass User &#123;    @PrimaryKey    public int id;     public String firstName;    public String lastName;     @Ignore    Bitmap picture;&#125;\nFieldëŠ” public í˜•íƒœì´ì–´ì•¼ í•˜ë©°, privateìœ¼ë¡œ í•  ê²½ìš° getterì™€ setterë¥¼ java beans conventionì— ë”°ë¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.\nPrimary Key\ncolumnì´ í•˜ë‚˜ë¼ë„ PKëŠ” ì§€ì •ë˜ì–´ì•¼ í•œë‹¤. @PrimaryKey annotationì„ ì´ìš©í•˜ê±°ë‚˜ ë³µí•© PKì˜ ê²½ìš° @Entity ì†ì„±ìœ¼ë¡œ primarykeysë¥¼ ì´ìš©í•œë‹¤.\në˜í•œ, Idë¥¼ autogenerateí•˜ë ¤ë©´ @PrimaryKey ì†ì„±ì— autoGenerate ì†ì„±(true)ì„ ë„£ëŠ”ë‹¤.\nì¶”ê°€ì ìœ¼ë¡œ class ì´ë¦„ì€ table ëª…ì´ ëœë‹¤. table ëª…ì„ ë°”ê¾¸ê³  ì‹¶ë‹¤ë©´ @Entity ì†ì„±ìœ¼ë¡œ tableNameì„ ë„£ìœ¼ë©´ ëœë‹¤.\në§Œì•½ field ì´ë¦„ì„ columnìœ¼ë¡œ ì“°ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ @ColumnInfoë¡œ í‘œê¸°í•´ì•¼ í•œë‹¤.\n12345678910111213141516171819202122232425262728293031// ë³µí•© PK ì‚¬ìš©ì‹œ@Entity(primaryKeys = &#123;\"firstName\", \"lastName\"&#125;)class User&#123;    public String firstName;    public String lastName;    @Ignore    Bitmap picture;&#125;// í…Œì´ë¸” ì´ë¦„ì„ ì§ì ‘ ì§€ì •í•  ë•Œ@Entity(tableName = \"users\")class User&#123;    // ìƒëµ&#125;// Columnì„ ì§ì ‘ ì§€ì •í•  ë•Œ@Entity(tableName = \"users\")class User&#123;    @PrimaryKey    public int uid;    @ColumnInfo(name = \"first_name\")    public String firstName;    @ColumnInfo(name = \"last_name\")    public String lastName;    @Ignore    Bitmap picture;&#125;\nIndices and uniqueness\nIndextëŠ” ì•„ë˜ì™€ ê°™ì´ ë§Œë“¤ ìˆ˜ ìˆë‹¤.(ê²°í•© indexë„ ìƒì„± ê°€ëŠ¥)\n12345678910111213141516@Entity(indices = &#123;@Index(\"name\"),@Index(value = &#123;\"last_name\",\"address\"&#125;)&#125;)public class Users &#123;    @PrimaryKey    public int uid;    public String firstName;    public String address;    @ColumnInfo(name = \"last_name\")    public String lastName;    @Ignore    Bitmap picture;&#125;\n\nUnique ì œì•½ ì¡°ê±´ì€ ì•„ë˜ì™€ ê°™ì´ í‘œê¸°í•  ìˆ˜ ìˆë‹¤.\nì˜ˆì œ) ê²°í•© ì¡°ê±´ì— ëŒ€í•œ unique index\n\n12345678910111213141516@Entity(indices = &#123;@Index(value = &#123;\"first_name\", \"last_name\"&#125;,        unique = true)&#125;)public class Users &#123;    @PrimaryKey    public int uid;    @ColumnInfo(name = \"first_name\")    public String firstName;    @ColumnInfo(name = \"last_name\")    public String lastName;    @Ignore    Bitmap picture;&#125;\n\nforeignKeyë„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.\n\n123456789101112@Entity(foreignKeys = @ForeignKey(entity = User.class,        parentColumns = \"id\",        childColumns = \"user_od\"))public class Book &#123;    @PrimaryKey    public int bookId;    public String title;    @ColumnInfo(name = \"user_id\")    public int useerId;&#125;\nNested objects\nEntity í´ë˜ìŠ¤ê°€ fieldë¡œ objectë¥¼ ê°–ëŠ” ê²½ìš° @Embededë¥¼ ì‚¬ìš©í•œë‹¤. ë‹¨, í•´ë‹¹ tableì—ëŠ” Embededëœ í´ë˜ìŠ¤ì˜ columnë„ ë˜‘ê°™ì€ í•˜ë‚˜ì˜ columnìœ¼ë¡œ ì·¨ê¸‰ëœë‹¤.\n12345678910111213141516171819class Address&#123;    public String street;    public String state; public String city;        @ColumnInfo(name = \"post_code\")     public int postCode;&#125;@Entityclass User&#123;    @PrimaryKey    public int id;    public String firstName;    @Embeded    public Address address;&#125;\nì¦‰, ìœ„ ì˜ˆì œì—ì„œ User tableì—ëŠ” id, firstName, street, state, city, post_cde ì»¬ëŸ¼ì´ ì¡´ì¬í•œë‹¤. Embeded ì•ˆì—ì„œ embededë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©°, ë§Œì•½ column ì´ë¦„ì´ ì¤‘ë³µë˜ëŠ” ê²½ìš° prefixë¥¼ ì‚¬ìš©í•˜ì—¬ uniqueí•˜ê²Œ column ì´ë¦„ì„ ì„¤ì •í•œë‹¤.\nDAO(Data Access Objects)(DAOs)\nDaoëŠ” abstract classë‚˜ interfaceê°€ ë  ìˆ˜ ìˆë‹¤. RoomDatabaseë¥¼ ì¸ìë¡œ ë°›ëŠ” ìƒì„±ìë¥¼ ë§Œë“œëŠ” ê²½ìš°ì—ë§Œ abstract classê°€ ë  ìˆ˜ ìˆë‹¤. Roomì€ ì ˆëŒ€ë¡œ main threadì—ì„œ query ì‘ì—…ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤. allowMainThreadQueries()ë¥¼ í˜¸ì¶œí•˜ë”ë¼ë„ ë¶ˆê°€ëŠ¥í•˜ë‹¤.\nLiveDataëŠ” returní•˜ëŠ” ë¹„ë™ê¸° queryì˜ ê²½ìš°ì—ëŠ” ê°€ëŠ¥í•˜ë‹¤.(ì–´ì°¨í”¼ backgroundì—ì„œ ìˆ˜í–‰ë˜ë¯€ë¡œ) - ë¬´ìŠ¨ ë§ì´ì§€â€¦?\nInsert\n@Insertë¡œ í‘œê¸°í•˜ë©°, single transactionìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤.\n1234567891011@Daopublic interface MyDao &#123;    @Insert(onConflict = OnConflictStrategy.REPLACE)    public void insertUsers(User... users);    @Insert    public void insertBothUser(User user1, User user2);    @Insert    public void insertUsersAndFriends(User user, List&lt;User&gt; friends);&#125;\n@Entityë¡œ ì •ì˜ëœ classë§Œ ì¸ìë¡œ ë°›ê±°ë‚˜, ê·¸ classì˜ collection ë˜ëŠ” arrayë§Œ ì¸ìë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤. ë˜í•œ, ì¸ìê°€ í•˜ë‚˜ì¸ ê²½ìš° long typeì˜ return(insertëœ ê°’ì˜ rowId)ì„ ë°›ì„ ìˆ˜ ìˆê³ , ì—¬ëŸ¬ ê°œì¸ ê²½ìš° long[], Listì„ ë°›ì„ ìˆ˜ ìˆë‹¤.\nUpdate\nUpdateë¥¼ ì‚¬ìš©í•˜ì—¬ Entity setì„ update í•œë‹¤. return ê°’ìœ¼ë¡œ ë³€ê²½ëœ rows ìˆ˜ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤. updateëŠ” PK ê¸°ì¤€ìœ¼ë¡œ í•œë‹¤.\n12345@Daopublic interface MyDao&#123;    @Update    public void updateUsers(User... user);&#125;\nDelete\nDeleteë¥¼ ì‚¬ìš©í•˜ì—¬ Entity setì„ delete í•œë‹¤. return ê°’ìœ¼ë¡œ ë³€ê²½ëœ rows ìˆ˜ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤. ì‚­ì œ keyëŠ” PKë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•œë‹¤.\n12345@Daopublic interface MyDao&#123;    @Delete    public void deleteUsers(User... users);&#125;\nQuery\n@Queryë¥¼ ì‚¬ìš©í•˜ì—¬ DBë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. compile timeì— returnë˜ëŠ” objectì˜ fieldì™€ sql ê²°ê³¼ë¡œ ë‚˜ì˜¤ëŠ” columnì˜ ì´ë¦„ì´ ë§ëŠ”ì§€ í™•ì¸í•˜ì—¬ ì¼ë¶€ê°€ matchë˜ë©´ warning, match ë˜ëŠ”ê²Œ ì—†ë‹¤ë©´ errorë¥¼ ë³´ë‚¸ë‹¤.\n12345@Daopublic interface MyDao&#123;    @Query(\"SELECT * FROM user\")    public User[] loadAllUsers();&#125;\n\nselectë¬¸ì— parameterê°€ ë“¤ì–´ê°€ì•¼ í•˜ëŠ” ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ë„£ì„ ìˆ˜ ìˆë‹¤.\n\n12345@Daopublic interface MyDao&#123;    @Query(\"SELECT * FROM user WHERE age &gt; :minAge\")    public User[] loadAllUsersOlderThan(int minAge);&#125;\n\nì•„ë˜ì™€ ê°™ì´ ì—¬ëŸ¬ ê°œì˜ parameterë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\n1234567@Dao public interface MyDao &#123;     @Query(\"SELECT * FROM user WHERE age BETWEEN :minAge AND :maxAge\")     public User[] loadAllUsersBetweenAges(int minAge, int maxAge);     @Query(\"SELECT * FROM user WHERE first_name LIKE :search \" + \"OR last_name LIKE :search\")     public List&lt;User&gt; findUserWithName(String search); &#125;\n\në§Œì•½ ì¼ë¶€ ì»¬ëŸ¼ë§Œ ì¡°íšŒí•˜ê³  ì‹¶ë‹¤ë©´ ë”°ë¡œ return classë¥¼ ë§Œë“¤ì–´ì„œ ìš”ì²­í•  ìˆ˜ ìˆë‹¤.\n\n1234567891011121314// return ë°›ì„ classë¥¼ ì •ì˜public class NameTuple&#123;    @ColumnInfo(name = \"first_name\")    public String firstName;    @ColumnInfo(name=\"last_name\")     public String lastName;&#125;@Daopublic interface MyDao&#123;    @Query(\"SELECT first_name, last_name FROM user\")    public List&lt;NameTuple&gt; loadFullName();&#125;\n\në˜í•œ, ì •í•´ì§€ì§€ ì•Šì€ ê°œìˆ˜ì˜ parameterê°€ ë„˜ì–´ê°€ì•¼ í•˜ëŠ” ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ìˆ˜í–‰ ê°€ëŠ¥í•˜ë‹¤.\n\n12345@Dao public interface MyDao &#123;     @Query(\"SELECT first_name, last_name FROM user WHERE region IN (:regions)\")     public List&lt;NameTuple&gt; loadUsersFromRegions(List&lt;String&gt; regions); &#125;\nê¸°íƒ€ ë“±ë“±ì˜ ê¸°ëŠ¥ë“¤ì„ í¬í•¨í•˜ê³  ìˆë‹¤. í•˜ì§€ë§Œ, ì•„ë˜ëŠ” í•„ìš”ì— ë”°ë¼ ì°¾ì•„ë³´ë©´ì„œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ ë  ê²ƒ ê°™ë‹¤.\nUsing tye converters\nRoomì€ primitive type(ì›ì‹œ íƒ€ì… ex. int, String ë“±ë“±)ê³¼ ê·¸ wrapping íƒ€ì…ë§Œ ì§€ì›í•œë‹¤. í•˜ì§€ë§Œ, ê·¸ ì™¸ì— typeì„ ì‚¬ìš©í•  ê²½ìš° TypeConverterë¥¼ ì‚¬ìš©í•˜ì—¬ typeì„ ì¹˜í™˜í•´ì•¼ í•œë‹¤.\nì˜ˆë¥¼ ë“¤ì–´, DBì—ì„œëŠ” timestampë¡œ ë˜ì–´ ìˆê³ , java codeì—ì„œëŠ” Date classë¡œ ë˜ì–´ ìˆëŠ” ê²½ìš° ìš°ì„  ì•„ë˜ì™€ ê°™ì´ converterë¥¼ ë§Œë“ ë‹¤.\n1234567891011public class Converters&#123;    @TypeConverter    public static Date fromTimestamp(Long value)&#123;        return value == null? null : new Date(value);    &#125;    @TypeConverter    public static Long dateToTimestamp(Date date)&#123;        return date == null? null : date.getTime();    &#125;&#125;\n\nì´ ë‘ê°œì˜ converting í•¨ìˆ˜ëŠ” ì„œë¡œ converting í•´ì£¼ê³  ìˆë‹¤.\n@TypeConvertersë¥¼ ì´ìš©í•˜ì—¬ ì ìš©í•  ê³³ì— ë„£ëŠ”ë‹¤.\n\n12345678910111213141516171819202122// AppDatabase.java@Database(entities = &#123;User.java&#125;, version= 1)@TypeConverters(&#123;Converters.class&#125;)public abstract class AppDatabase extends RoomDatabase&#123;    public abstract UserDao userDao();&#125;// User.java@Entitypublic class User&#123;    ...    private Date birthday;&#125;// UserDao.java@Daopublic interface UserDao&#123;    ...    @Query(\"SELECT * FROM user WHERE birthday BETWEEN :from AND :to\")    List&lt;User&gt; findUsersBornBetweenDates(Date from, Date to);&#125;\n\n@TypeConverterë¥¼ ì§€ì •í•˜ëŠ” ìœ„ì¹˜ì— ë”°ë¼ scopeì´ ë‹¬ë¼ì§„ë‹¤.\nì˜ˆì œì²˜ëŸ¼ Databaseì— ë„£ìœ¼ë©´ Daoì™€ entity ëª¨ë‘ ì˜í–¥ì„ ë°›ëŠ”ë‹¤.\nDaoë‚˜ Entity, POJOì— ë„£ì„ ìˆ˜ë„ ìˆê³ , Entityì˜ íŠ¹ì • field, Daoì˜ íŠ¹ì • method or íŠ¹ì • parameterì— ë„£ì„ ìˆ˜ ìˆë‹¤.\n\nDatabase migration\ndatabase migrationì´ í•„ìš”í•œ ê²½ìš° entity classì— ìˆ˜ì • í•­ëª©ì„ ë°˜ì˜í•´ì•¼ í•œë‹¤. ë˜í•œ ë°ì´í„°ë¥¼ ë‚ ë¦¬ì§€ ì•Šê¸° ìœ„í•´ì„œ mirgrationì„ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.\nmigrationì„ ë“±ë¡í•˜ë©´, runtimeì— migrationì„ ìˆ˜í–‰í•˜ë©° ì •í•´ë†“ì€ ìˆœì„œëŒ€ë¡œ migrationì´ ê°€ëŠ¥í•˜ë‹¤. migrationì„ ë“±ë¡í•  ë•ŒëŠ” ì‹œì‘ ë²„ì „ê³¼ ë ë²„ì „ì„ ë„£ì–´ì•¼ í•œë‹¤.\n1234567891011121314Room.databaseBuilder(getApplicationContext(), MyDb.class, \"database-name\").addMigrations(MIGRATION_1_2, MIGRATION_2_3).build();static final Migration MIGRATION_1_2 = new Migration(1,2)&#123;    @Override public void migrate(SupportSQLiteDatabase database) &#123;         database.execSQL(\"CREATE TABLE `Fruit` (`id` INTEGER, \" + \"`name` TEXT, PRIMARY KEY(`id`))\");     &#125;&#125;;static final Migration MIGRATION_2_3 = new Migration(2, 3) &#123;     @Override     public void migrate(SupportSQLiteDatabase database) &#123;         database.execSQL(\"ALTER TABLE Book \" + \" ADD COLUMN pub_year INTEGER\");         &#125; &#125;;\n\nmigration ì½”ë“œê°€ ì—†ìœ¼ë©´ Roomì€ DBë¥¼ ê·¸ëƒ¥ rebuildí•œë‹¤.(ê¸°ì¡´ ë°ì´í„°ëŠ” ë‚ ì•„ê°„ë‹¤.)\në˜í•œ, migrationì— ë“¤ì–´ê°€ëŠ” queryëŠ” ìƒìˆ˜ì— ë„£ì§€ë§ê³ , ì§ì ‘ ë„£ëŠ”ê²Œ migration ë¡œì§ì„ ìœ ì§€í•˜ëŠ”ë°ë” ì¢‹ë‹¤.\nmigrationì´ ëë‚˜ê³  ë‚˜ë©´, schemaì— ëŒ€í•œ ìœ íš¨ì„±ì„ í™•ì¸ì„ í•˜ê³ , ë¬¸ì œê°€ ìˆì„ ê²½ìš° mismatchëœ ë¶€ë¶„ì— ì •ë³´ë¥¼ ë‹´ì€ exceptionì„ ë°œìƒ ì‹œí‚¨ë‹¤.\n\nì°¸ê³ \n\nAndroid Architecture Components #6 - Room\nDefining data using Room entities\nSave data in a local database using Room\n\n","dateCreated":"2019-01-25T16:08:11+09:00","dateModified":"2020-04-25T22:54:10+09:00","datePublished":"2019-01-25T16:08:11+09:00","description":"","headline":"5ì¼ì°¨ [ì•ˆë“œë¡œì´ë“œ] Room","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://woovictory.github.io/2019/01/25/Android-Room-Basic/"},"publisher":{"@type":"Organization","name":"VictoryWoo","sameAs":["https://github.com/WooVictory","https://www.facebook.com/WooVictory","https://www.linkedin.com/profile/","jhsw0375@gmail.com"],"image":"Victory.jpeg","logo":{"@type":"ImageObject","url":"Victory.jpeg"}},"url":"https://woovictory.github.io/2019/01/25/Android-Room-Basic/","keywords":"Android, Room, Basic, AAC"}</script>
    <meta name="description" content="[2020.02.11 ê¸°ì¤€ìœ¼ë¡œ ìˆ˜ì •ê³¼ ë™ì‹œì— ë‚´ìš©ì„ ì¶”ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.] [2020.03.27 ê¸°ì¤€ìœ¼ë¡œ ê¸€ì„ ìƒˆë¡­ê²Œ ì‘ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ìƒˆë¡œ ì‘ì„±ë˜ëŠ” í¬ìŠ¤íŒ…ì´ ì™„ë£Œë˜ë©´ í•´ë‹¹ í¬ìŠ¤íŒ…ì€ ì‚­ì œë  ì˜ˆì •ì…ë‹ˆë‹¤.] ì‘ì„±ì¤‘ì¸ ê¸€ : Room ê°œë…í¸ [2020.04.25 ê¸°ì¤€ í™ë³´ ë‚´ìš© ì¶”ê°€] í˜„ì¬ ì‹ ì… ê°œë°œìë¥¼ ìœ„í•œ Repositoryë¥¼ ìš´ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ğŸ’»">
<meta name="keywords" content="Android,Room,Basic,AAC">
<meta property="og:type" content="blog">
<meta property="og:title" content="5ì¼ì°¨ [ì•ˆë“œë¡œì´ë“œ] Room">
<meta property="og:url" content="https://woovictory.github.io/2019/01/25/Android-Room-Basic/index.html">
<meta property="og:site_name" content="VictoryWoo">
<meta property="og:description" content="[2020.02.11 ê¸°ì¤€ìœ¼ë¡œ ìˆ˜ì •ê³¼ ë™ì‹œì— ë‚´ìš©ì„ ì¶”ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.] [2020.03.27 ê¸°ì¤€ìœ¼ë¡œ ê¸€ì„ ìƒˆë¡­ê²Œ ì‘ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ìƒˆë¡œ ì‘ì„±ë˜ëŠ” í¬ìŠ¤íŒ…ì´ ì™„ë£Œë˜ë©´ í•´ë‹¹ í¬ìŠ¤íŒ…ì€ ì‚­ì œë  ì˜ˆì •ì…ë‹ˆë‹¤.] ì‘ì„±ì¤‘ì¸ ê¸€ : Room ê°œë…í¸ [2020.04.25 ê¸°ì¤€ í™ë³´ ë‚´ìš© ì¶”ê°€] í˜„ì¬ ì‹ ì… ê°œë°œìë¥¼ ìœ„í•œ Repositoryë¥¼ ìš´ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ğŸ’»">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-04-25T13:54:10.383Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="5ì¼ì°¨ [ì•ˆë“œë¡œì´ë“œ] Room">
<meta name="twitter:description" content="[2020.02.11 ê¸°ì¤€ìœ¼ë¡œ ìˆ˜ì •ê³¼ ë™ì‹œì— ë‚´ìš©ì„ ì¶”ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.] [2020.03.27 ê¸°ì¤€ìœ¼ë¡œ ê¸€ì„ ìƒˆë¡­ê²Œ ì‘ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ìƒˆë¡œ ì‘ì„±ë˜ëŠ” í¬ìŠ¤íŒ…ì´ ì™„ë£Œë˜ë©´ í•´ë‹¹ í¬ìŠ¤íŒ…ì€ ì‚­ì œë  ì˜ˆì •ì…ë‹ˆë‹¤.] ì‘ì„±ì¤‘ì¸ ê¸€ : Room ê°œë…í¸ [2020.04.25 ê¸°ì¤€ í™ë³´ ë‚´ìš© ì¶”ê°€] í˜„ì¬ ì‹ ì… ê°œë°œìë¥¼ ìœ„í•œ Repositoryë¥¼ ìš´ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ğŸ’»">
    
    
        
    
    
        <meta property="og:image" content="https://woovictory.github.io/assets/images/Victory.jpeg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125410253-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-125410253-1');
    </script>


    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/ "
            aria-label=""
        >
            VictoryWoo
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/Victory.jpeg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/Victory.jpeg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">VictoryWoo</h4>
                
                    <h5 class="sidebar-profile-bio"><p>ê¸°ë¡ì„ í†µí•´ ì‚¬ëŒë“¤ê³¼ ê³µìœ í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/WooVictory"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.facebook.com/WooVictory"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/jhsw0375@gmail.com"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            5ì¼ì°¨ [ì•ˆë“œë¡œì´ë“œ] Room
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-01-25T16:08:11+09:00">
	
		    Jan 25, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Android/">Android</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>[2020.02.11 ê¸°ì¤€ìœ¼ë¡œ ìˆ˜ì •ê³¼ ë™ì‹œì— ë‚´ìš©ì„ ì¶”ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.]<br>
[2020.03.27 ê¸°ì¤€ìœ¼ë¡œ ê¸€ì„ ìƒˆë¡­ê²Œ ì‘ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ìƒˆë¡œ ì‘ì„±ë˜ëŠ” í¬ìŠ¤íŒ…ì´ ì™„ë£Œë˜ë©´ í•´ë‹¹ í¬ìŠ¤íŒ…ì€ ì‚­ì œë  ì˜ˆì •ì…ë‹ˆë‹¤.]<br>
ì‘ì„±ì¤‘ì¸ ê¸€ : <a href="https://woovictory.github.io/2020/03/27/Android-Room-Concept/">Room ê°œë…í¸</a><br>
[2020.04.25 ê¸°ì¤€ í™ë³´ ë‚´ìš© ì¶”ê°€]<br>
í˜„ì¬ ì‹ ì… ê°œë°œìë¥¼ ìœ„í•œ Repositoryë¥¼ ìš´ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. <a href="https://github.com/WooVictory/Ready-For-Tech-Interview" target="_blank" rel="noopener">ğŸ’» ì‹ ì… ê°œë°œìë¡œì„œ ì¤€ë¹„ë¥¼ í•˜ê¸° ìœ„í•´ ì§€ì‹ì„ ì •ë¦¬í•˜ëŠ” ê³µê°„ ğŸ‘¨â€ğŸ’»</a>ì´ë©°, ìš´ì˜ì²´ì œ, ìë°”, ë„¤íŠ¸ì›Œí¬, ë°ì´í„°ë² ì´ìŠ¤ ë“±ì˜ ë‚´ìš©ì´ ì •ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê³„ì†í•´ì„œ ê¾¸ì¤€íˆ ì¶”ê°€ ì¤‘ì´ë‹ˆ í•œë²ˆì”© ë“¤ëŸ¬ì„œ ë´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤. ë˜í•œ, ë„ì›€ì´ ëœë‹¤ë©´ Starë¥¼ ê¾¹~ ëˆŒëŸ¬ì£¼ì‹œë©´ ì €ì—ê²Œ í° í˜ì´ ë©ë‹ˆë‹¤ :)</p>
<p>Android Architecture Component ì¤‘ í•˜ë‚˜ì¸ Roomì— ëŒ€í•´ ì•Œì•„ë³´ë ¤ê³  í•œë‹¤.</p>
<h3 id="orm">[ORM]</h3>
<p>Roomì„ ì•Œì•„ë³´ê¸° ì „ì— ORMì´ ë¬´ì—‡ì¸ì§€ ì‚´í´ë³´ì. ORMì´ë€ Object Relational Mappingìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì™€ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ê°„ì˜ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ë°ì´í„°ë¥¼ ë³€í™˜í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ê¸°ë²•ìœ¼ë¡œ <strong>DB í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ëŠ” ê°ì²´ë¥¼ ë§Œë“¤ê³  ê·¸ ê°ì²´ì—ì„œ DBë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.</strong></p>
<h3 id="room">[Room]</h3>
<p>Roomì€ SQLiteì˜ ê¸°ëŠ¥ì„ ìµœëŒ€í•œ í™œìš©í•˜ëŠ” ë™ì‹œì— ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì›í™œí•˜ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ SQLite ìœ„ì— ì¶”ìƒí™” ê³„ì¸µì„ ì œê³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.</p>
<ul>
<li>ì ì€ ì–‘ì˜ ì •í˜•í™”ëœ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë¡œì»¬ì—ì„œ í•´ë‹¹ ë°ì´í„°ë¥¼ ìœ ì§€í•¨ìœ¼ë¡œì¨ í° ì´ì ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.
<ul>
<li>ex) ê´€ë ¨ ë°ì´í„°ë¥¼ ìºì‹œí•˜ëŠ” ê²ƒ</li>
</ul>
</li>
<li>ì´ë ‡ê²Œ í•˜ë©´ ì¥ì¹˜ê°€ ë„¤íŠ¸ì›Œí¬ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë„ ì‚¬ìš©ìê°€ ì˜¤í”„ë¼ì¸ ìƒíƒœì¼ ë•Œ í•´ë‹¹ ì½˜í…ì¸ ë¥¼ ê³„ì† íƒìƒ‰í•  ìˆ˜ ìˆë‹¤. ì´í›„ì— ì¥ì¹˜ê°€ ë‹¤ì‹œ ì˜¨ë¼ì¸ ìƒíƒœê°€ ë˜ë©´ ì‚¬ìš©ìê°€ ì‹œì‘í•œ ëª¨ë“  ì½˜í…ì¸  ë³€ê²½ ë‚´ìš©ì´ ì„œë²„ì— ë™ê¸°í™”ëœë‹¤.</li>
</ul>
<h3 id="ì‚¬ìš©í•´ë³´ê¸°">[ì‚¬ìš©í•´ë³´ê¸°]</h3>
<ol>
<li>gradleì— ì˜ì¡´ì„±ì„ ì¶”ê°€í•œë‹¤.</li>
</ol>
<ul>
<li><strong>ë¨¼ì €, build.gradle íŒŒì¼ì˜ dependenciesì— ì¶”ê°€í•´ì¤€ë‹¤.ê·¸ë˜ì•¼ì§€ Roomì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</strong></li>
<li>roomVersionì€ ì‚¬ìš©í•˜ëŠ” ì‹œì ì— ë§ëŠ” ë²„ì „ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//room</span></span><br><span class="line">implementation <span class="string">"android.arch.persistence.room:runtime:$roomVersion"</span></span><br><span class="line">kapt <span class="string">"android.arch.persistence.room:compiler:$roomVersion"</span></span><br></pre></td></tr></table></figure>
<h3 id="3ê°€ì§€-ì£¼ìš”-ì»´í¬ë„ŒíŠ¸">[3ê°€ì§€ ì£¼ìš” ì»´í¬ë„ŒíŠ¸]</h3>
<p>Roomì€ ì—”í‹°í‹°(Entity), ë°ì´í„° ì ‘ê·¼ ê°ì²´(Data Access Object), ë£¸ ë°ì´í„° ë² ì´ìŠ¤(Room Database) ì´ë ‡ê²Œ ì´ 3ê°€ì§€ êµ¬ì„±ìš”ì†Œë¡œ ë‚˜ë‰œë‹¤.</p>
<ol>
<li><strong>Database</strong></li>
</ol>
<ul>
<li>ë°ì´í„°ë² ì´ìŠ¤ í™€ë”ë¥¼ í¬í•¨í•˜ê³  ì•±ì˜ ì§€ì†ì ì´ê³  ê´€ê³„ê°€ ìˆëŠ” ë°ì´í„°ì— ëŒ€í•œ ê¸°ë³¸ ì—°ê²°ì„ ìœ„í•œ ê¸°ë³¸ ì•¡ì„¸ìŠ¤ ì§€ì  ì—­í• ì„ í•œë‹¤.</li>
<li><code>@Database</code>ë¡œ ì–´ë…¸í…Œì´ì…˜ëœ í´ë˜ìŠ¤ëŠ” ë‹¤ìŒì˜ ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ í•œë‹¤.
<ul>
<li><strong>RoomDatabase</strong>ë¥¼ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì´ì–´ì•¼ í•œë‹¤.</li>
<li>ì–´ë…¸í…Œì´ì…˜ ë‚´ì— ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ê´€ëœ (ì¦‰, ë°ì´í„°ë² ì´ìŠ¤ì— ë“¤ì–´ê°ˆ í…Œì´ë¸”) ì—”í‹°í‹°ì˜ ëª©ë¡ì„ í¬í•¨í•œë‹¤.</li>
<li>íŒŒë¼ë¯¸í„°ê°€ 0ê°œì¸ ì¶”ìƒ ë©”ì†Œë“œë¥¼ í¬í•¨í•˜ê³  @Daoë¡œ ì–´ë…¸í…Œì´ì…˜ëœ í´ë˜ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.</li>
</ul>
</li>
<li>ëŸ°íƒ€ì„ì— <code>Room.databaseBuilder() ë˜ëŠ” Room.inMemoryDatabaseBuilder()</code>ë¥¼ í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// User and Book are classes annotated with @Entity.</span></span><br><span class="line"><span class="meta">@Database</span>(version = <span class="number">1</span>, entities = &#123;User.class, Book.class&#125;)</span><br><span class="line"><span class="function"><span class="keyword">abstract</span> class AppDatabase extends <span class="title">RoomDatabase</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// BookDao is a class annotated with @Dao. </span></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">public</span> BookDao <span class="title">bookDao</span><span class="params">()</span></span>; </span><br><span class="line">    <span class="comment">// UserDao is a class annotated with @Dao. </span></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">public</span> UserDao <span class="title">userDao</span><span class="params">()</span></span>; </span><br><span class="line">    <span class="comment">// UserBookDao is a class annotated with @Dao. </span></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">public</span> UserBookDao <span class="title">userBookDao</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì‹¤í–‰í•˜ëŠ” ëŒ€ì‹  Dao í´ë˜ìŠ¤ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ë‹¤. Dao í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ë³´ë‹¤ ë…¼ë¦¬ì ì¸ ê³„ì¸µì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ í†µì‹ ì„ ì¶”ìƒí™”í•  ìˆ˜ ìˆë‹¤. ì´ ê³„ì¸µì€ ì§ì ‘ sql ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì— ë¹„í•´ í…ŒìŠ¤íŠ¸ë¥¼ ë” ì‰½ê²Œ í•  ìˆ˜ ìˆë‹¤.</li>
<li>Roomì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì»´íŒŒì¼ ë˜ëŠ” ë™ì•ˆ Dao í´ë˜ìŠ¤ì˜ ëª¨ë“  ì¿¼ë¦¬ë¥¼ í™•ì¸í•˜ì—¬ ì¿¼ë¦¬ ì¤‘ ë¬¸ì œê°€ ìˆëŠ” ê²½ìš° ì¦‰ì‹œ ì‚¬ìš©ìì—ê²Œ ì•Œë ¤ì¤€ë‹¤.</li>
</ul>
<ol start="2">
<li><strong>Entity</strong></li>
</ol>
<ul>
<li>ë°ì´í„°ë² ì´ìŠ¤ ë‚´ì—ì„œ í…Œì´ë¸”ì„ ë‚˜íƒ€ë‚¸ë‹¤.</li>
<li>roomì„ ì‚¬ìš©í•  ë•Œ ê´€ë ¨ í•„ë“œ ì§‘í•©ì„ ì—”í‹°í‹°ë“¤ë¡œ ì •ì˜í•œë‹¤.</li>
<li>ê° ì—”í‹°í‹°ì— ëŒ€í•´ í•­ëª©(ì•„ì´í…œ)ì„ ë³´ê´€í•˜ê¸° ìœ„í•´ ì—°ê²°ëœ ë°ì´í„°ë² ì´ìŠ¤ ê°ì²´ ë‚´ì— í…Œì´ë¸”ì´ ìƒì„±ëœë‹¤.</li>
<li>ë°ì´í„°ë² ì´ìŠ¤ í´ë˜ìŠ¤ì˜ ì—”í‹°í‹° arrayë¥¼ í†µí•´ ì—”í‹°í‹° í´ë˜ìŠ¤ë¥¼ ì°¸ì¡°í•´ì•¼ í•œë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>í•„ë“œë¥¼ ìœ ì§€í•˜ë ¤ë©´, ë£¸ì€ í•„ë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.</li>
<li>í•„ë“œë¥¼ publicìœ¼ë¡œ ë§Œë“¤ê±°ë‚˜, getter / setterë¥¼ ì œê³µí•  ìˆ˜ ìˆë‹¤.</li>
<li>getter / setter methodë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ë£¸ì—ì„œ JavaBeans ê·œì¹™ì„ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤.[ë©¤ë²„ ë³€ìˆ˜ëŠ” privateí˜•ì„ ì§€ì •í•˜ì—¬ ì„ ì–¸í•œë‹¤.]</li>
</ul>
<blockquote>
<p>ì£¼ì˜</p>
</blockquote>
<p>ì—”í‹°í‹°ì—ëŠ” ë¹ˆ ìƒì„±ì (í•´ë‹¹ DAO í´ë˜ìŠ¤ê°€ ê° ì§€ì† í•„ë“œë¥¼ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ê²½ìš°) ë˜ëŠ” ë§¤ê°œ ë³€ìˆ˜ì— ì—”í‹°í‹° í•„ë“œì™€ ì¼ì¹˜í•˜ëŠ” ìœ í˜•ê³¼ ì´ë¦„ì´ í¬í•¨ëœ ìƒì„±ìê°€ ìˆì„ ìˆ˜ ìˆë‹¤. ë£¸ì€ ì¼ë¶€ í•„ë“œë§Œ ìˆ˜ì‹ í•˜ëŠ” ìƒì„±ìì™€ ê°™ì´ ì „ì²´ ë˜ëŠ” ë¶€ë¶„ ìƒì„±ìë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.</p>
<p><strong>User a Primary Key</strong></p>
<ul>
<li>ê° EntityëŠ” ìµœì†Œ í•˜ë‚˜ ì´ìƒì˜ í•„ë“œë¥¼ ê¸°ë³¸í‚¤ë¡œ ì§€ì •í•´ì•¼ í•œë‹¤.</li>
<li>í•„ë“œê°€ í•˜ë‚˜ë§Œ ìˆëŠ” ê²½ìš°ì—ë„ <code>@PrimaryKey</code> ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ í•„ë“œì— ì£¼ì„ì„ ë‹¬ í•„ìš”ê°€ ìˆë‹¤.</li>
<li>ë˜í•œ, ë£¸ì—ì„œ ì—”í‹°í‹°ì— ìë™ìœ¼ë¡œ IDë¥¼ í• ë‹¹í•˜ë„ë¡ í•˜ë ¤ë©´ @PrimaryKeyì˜ <strong>autoGenerate</strong> ì†ì„±ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.(ê¸°ë³¸ì€ false. ex: indexê°€ ìë™ìœ¼ë¡œ ì¦ê°€í•˜ëŠ” ê²½ìš°ì™€ ê°™ì€)</li>
<li>ì—”í‹°í‹°ê°€ ë³µí•© PrimaryKeyê°€ ìˆëŠ” ê²½ìš° @Entity ì–´ë…¸í…Œì´ì…˜ì˜ <strong>primaryKeys</strong> ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span>(primaryKeys = &#123;<span class="string">"firstName"</span>, <span class="string">"lastName"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ê¸°ë³¸ì ìœ¼ë¡œ ë£¸ì€ í´ë˜ìŠ¤ ì´ë¦„ì„ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.</li>
<li>ë§Œì•½ í…Œì´ë¸”ì´ ë‹¤ë¥¸ ì´ë¦„ì„ ê°€ì§€ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´, @Entity ì–´ë…¸í…Œì´ì…˜ì˜ <strong>tableName</strong> ì†ì„±ì„ ì„¤ì •í•˜ë©´ ëœë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span>(tableName = <span class="string">"users"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="comment">///</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ì£¼ì˜ : SQLiteì˜ í…Œì´ë¸” ì´ë¦„ì€ ëŒ€ì†Œë¬¸ìë¥¼ êµ¬ë¶„í•˜ì§€ ì•ŠëŠ”ë‹¤.</p>
</blockquote>
<ul>
<li>tableName ì†ì„±ê³¼ ë¹„ìŠ·í•˜ê²Œ ë£¸ì€ í•„ë“œ ì´ë¦„ì„ ë°ì´í„°ë² ì´ìŠ¤ì˜ column ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.</li>
<li>ë§Œì•½ column ì´ë¦„ì„ ë‹¤ë¥´ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´ <code>@ColumnInfo</code> ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ë©´ ëœë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span>(tableName = <span class="string">"users"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"first_name"</span>)</span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"last_name"</span>)</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Ignore fields</strong></p>
<ul>
<li>ê¸°ë³¸ì ìœ¼ë¡œ ë£¸ì€ ì—”í‹°í‹°ì— ì •ì˜ëœ ê° í•„ë“œì— ëŒ€í•œ Columnì„ ìƒì„±í•œë‹¤.</li>
<li>ì—”í‹°í‹°ì— ì§€ì†í•˜ê³  ì‹¶ì§€ ì•Šì€ í•„ë“œê°€ ìˆëŠ” ê²½ìš° <code>@Ignore</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ í•„ë“œì— ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span>(tableName = <span class="string">"users"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    Bitmap picture;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ìƒìœ„ ì—”í‹°í‹°ì—ì„œ í•„ë“œë¥¼ ìƒì†í•˜ëŠ” ê²½ìš°, ì¼ë°˜ì ìœ¼ë¡œ @Entity íŠ¹ì„±ì˜ <strong>ignoredColumns</strong> ì†ì„±ì„ ë” ì‰½ê²Œ ì¶”ê°€í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span>(ignoredColumns = <span class="string">"picture"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RemoteUser</span> <span class="keyword">extends</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> hasVpn;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Provide table search support</strong></p>
<p>ì¶”ê°€ ì˜ˆì •~~</p>
<ol start="3">
<li><strong>DAO(Data Access Object)</strong></li>
</ol>
<ul>
<li>ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œë¥¼ í¬í•¨í•˜ë©°, ë°ì´í„° ì ‘ê·¼ ê°ì²´ì´ë‹¤.</li>
<li>ì¸í„°í˜ì´ìŠ¤ë¡œì„œ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œë¥¼ ì •ì˜í•œë‹¤.</li>
<li>ë£¸ì„ ì‚¬ìš©í•´ ì•±ì˜ ë°ì´í„°ì— ì ‘ê·¼í•˜ë ¤ë©´ DAOë¥¼ ì‚¬ìš©í•œë‹¤.</li>
<li>ê° DAOì—ëŠ” ì•±ì˜ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì¶”ìƒì  ì•¡ì„¸ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ë°©ë²•ì´ í¬í•¨ë˜ì–´ ìˆìœ¼ë¯€ë¡œ(interfaceë‚´ì— ì¿¼ë¦¬ì™€ í•¨ê»˜ í•¨ìˆ˜ë§Œ ì •ì˜) ì´ Dao ê°ì²´ë“¤ì€ ë£¸ì˜ ì£¼ìš” êµ¬ì„±ìš”ì†Œë¥¼ í˜•ì„±í•œë‹¤.</li>
<li>ì¿¼ë¦¬ builderë‚˜ ì§ì ‘ì ì¸ ì¿¼ë¦¬ ëŒ€ì‹  DAO í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ì˜ ë‹¤ì–‘í•œ êµ¬ì„± ìš”ì†Œë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.</li>
<li>ë˜í•œ, DAOë¥¼ ì‚¬ìš©í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í…ŒìŠ¤íŠ¸í•  ë•Œ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆë‹¤.</li>
<li>DAOëŠ” ì¸í„°í˜ì´ìŠ¤ ë˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì¼ ìˆ˜ ìˆë‹¤.
<ul>
<li>ì¶”ìƒ í´ë˜ìŠ¤ì¸ ê²½ìš° ì„ íƒì ìœ¼ë¡œ RoomDatabaseë¥¼ ìœ ì¼í•œ ë§¤ê°œ ë³€ìˆ˜ë¡œ ì‚¬ìš©í•˜ëŠ” ìƒì„±ìë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.</li>
<li>Roomì€ <strong>Compile time</strong>ì— ê° DAO êµ¬í˜„ì„ ìƒì„±í•œë‹¤.</li>
</ul>
</li>
</ul>
<p><strong>Define methods for convenience</strong></p>
<ul>
<li>DAO í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ê°€ì§€ í¸ë¦¬í•œ ì¿¼ë¦¬ê°€ ìˆë‹¤.</li>
</ul>
<p><strong>1. Insert</strong></p>
<ul>
<li>DAO ë©”ì†Œë“œë¥¼ ì‘ì„±í•˜ê³  @Insertë¡œ ì–´ë…¸í…Œì´ì…˜ì„ ì§€ì •í•  ë•Œ, Roomì€ ë‹¨ì¼ íŠ¸ëœì­ì…˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ì— ëª¨ë“  ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚½ì…í•˜ëŠ” êµ¬í˜„ì„ ìƒì„±í•œë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Insert</span>(onConflict = OnConflictStrategy.REPLACE)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertUsers</span><span class="params">(User... users)</span></span>;</span><br><span class="line"></span><br><span class="line">     <span class="meta">@Insert</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertBothUsers</span><span class="params">(User user1, User user2)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertUsersAndFriends</span><span class="params">(User user, List&lt;User&gt; friends)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>@Insert ë©”ì†Œë“œëŠ” ë§¤ê°œ ë³€ìˆ˜ë¥¼ 1ê°œë§Œ ë°›ìœ¼ë©´ ì‚½ì…ëœ í•­ëª©ì˜ ìƒˆ rowIdì¸ long íƒ€ì…ì˜ ê°’ì„ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤. ë§¤ê°œë³€ìˆ˜ê°€ ë°°ì—´ ë˜ëŠ” ì§‘í•©ì¸ ê²½ìš° Long[] ë˜ëŠ” List<long>ì„ ëŒ€ì‹  ë°˜í™˜í•´ì•¼ í•œë‹¤.</long></li>
<li>@Insertì— <code>onConflict</code> ì†ì„±ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.  í…Œì´ë¸”ì— Entityë¥¼ ì‚½ì…í•  ë•Œ ê°™ì€ ê°’ì¸ ê²½ìš°, <strong>ì¶©ëŒ</strong>ì´ ë°œìƒí•˜ëŠ”ë° ì´ ì¶©ëŒì„ ì–´ë–»ê²Œ í•´ê²°í• ì§€ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.
<ul>
<li>ìœ„ì—ì„œëŠ” Replaceë¡œ ì§€ì •í•˜ì—¬ ì¶©ëŒ ë°œìƒ ì‹œ ìƒˆë¡œ ë“¤ì–´ì˜¨ ë°ì´í„°ë¡œ êµì²´í•œë‹¤.</li>
</ul>
</li>
</ul>
<p><strong>2. update</strong></p>
<ul>
<li><code>update</code> ë°©ë²•ì€ í…Œì´í„°ë² ì´ìŠ¤ì—ì„œ ë§¤ê°œ ë³€ìˆ˜ë¡œ ì§€ì •ëœ ì—”í‹°í‹° ì§‘í•©ì„ ìˆ˜ì •í•œë‹¤. ê° ì—”í‹°í‹°ì˜ ê¸°ë³¸ í‚¤ì™€ ì¼ì¹˜í•˜ëŠ” ì¡°íšŒë¥¼ ì‚¬ìš©í•œë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Update</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUsers</span><span class="params">(User... users)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ì¼ë°˜ì ìœ¼ë¡œ í•„ìš”í•˜ì§„ ì•Šì§€ë§Œ, updateë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì—…ë°ì´íŠ¸ëœ í–‰ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” int ê°’ì„ ë°˜í™˜í•  ë°›ì„ ìˆ˜ ìˆë‹¤.</li>
</ul>
<p><strong>3. Delete</strong></p>
<ul>
<li><code>Delete</code> ë°©ë²•ì€ ë§¤ê°œ ë³€ìˆ˜ë¡œ ì§€ì •ëœ ì—”í‹°í‹° ì§‘í•©ì„ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì œê±°í•œë‹¤. ê¸°ë³¸í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚­ì œí•  ì—”í‹°í‹°ë¥¼ ì°¾ëŠ”ë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Delete</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteusers</span><span class="params">(User... users)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>updateì™€ ë¹„ìŠ·í•˜ê²Œ ì‚­ì œë¥¼ í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì œê±°ëœ í–‰ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” int ê°’ì„ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<p><strong>4. Query</strong></p>
<ul>
<li><code>@Query</code>ëŠ” DAO í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì£¼ì„ì´ë‹¤.</li>
<li>ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì½ê¸° / ì“°ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.</li>
<li>ê° @Query ë©”ì†Œë“œëŠ” Compile timeì— í™•ì¸ë˜ë¯€ë¡œ ì¿¼ë¦¬ì— ë¬¸ì œê°€ ìˆìœ¼ë©´ Runtim Error ëŒ€ì‹  <code>Compile Error</code>ê°€ ë°œìƒí•œë‹¤.</li>
<li>ë˜í•œ, ë£¸ì€ ë°˜í™˜ëœ ê°ì²´ì˜ í•„ë“œ ì´ë¦„ì´ ì¿¼ë¦¬ ì‘ë‹µì˜ í•´ë‹¹ ì—´ ì´ë¦„ê³¼ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë£¸ì€ ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ë²• ì¤‘ í•˜ë‚˜ë¡œ ê²½ê³ ë¥¼ í‘œì‹œí•œë‹¤.
<ul>
<li>ì¼ë¶€ í•„ë“œ ì´ë¦„ë§Œ ì¼ì¹˜í•˜ëŠ” ê²½ìš° ê²½ê³ ë¥¼ í‘œì‹œí•œë‹¤.</li>
<li>í•„ë“œ ì´ë¦„ì´ ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT * FROM user"</span>)</span><br><span class="line">    <span class="keyword">public</span> User[] loadAllUsers();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ëª¨ë“  ì‚¬ìš©ìë¥¼ loadí•˜ëŠ” ê°„ë‹¨í•œ ì¿¼ë¦¬ì´ë‹¤.</li>
<li>Compile timeì— ë£¸ì€ ì‚¬ìš©ì í…Œì´ë¸”ì˜ ëª¨ë“  Columnì„ ì¿¼ë¦¬í•œë‹¤ëŠ” ê²ƒì„ ì•Œê³  ìˆë‹¤. ì¿¼ë¦¬ì— êµ¬ë¬¸ ì˜¤ë¥˜ê°€ ìˆê±°ë‚˜ ì‚¬ìš©ì í…Œì´ë¸”ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ì—†ëŠ” ê²½ìš°, Roomì€ ì•± ì»´íŒŒì¼ ì‹œ ì ì ˆí•œ ë©”ì‹œì§€ê°€ í¬í•¨ëœ ì˜¤ë¥˜ë¥¼ í‘œì‹œí•œë‹¤.</li>
</ul>
<p><strong>5. Passing parameters into the query</strong></p>
<ul>
<li>ëŒ€ë¶€ë¶„ì˜ ê²½ìš° íŠ¹ì • ì—°ë ¹ë³´ë‹¤ ë‚˜ì´ê°€ ë§ì€ ì‚¬ìš©ìë§Œ í‘œì‹œí•˜ëŠ” ë“±ì˜ í•„í„°ë§ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë ¤ë©´ ë§¤ê°œ ë³€ìˆ˜ë¥¼ ì¿¼ë¦¬ì— ì „ë‹¬í•´ì•¼ í•œë‹¤.</li>
<li>ë‹¤ìŒì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT * FROM user WHERE age &gt; :minAge"</span>)</span><br><span class="line">    <span class="keyword">public</span> User[] loadAllUsersOlderThan(<span class="keyword">int</span> minAge);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ì´ ì¿¼ë¦¬ë¥¼ ì»´íŒŒì¼í•  ë•Œ, Roomì€ :minAge bind ë§¤ê°œ ë³€ìˆ˜ì™€ minAge ë©”ì†Œë“œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¼ì¹˜ì‹œí‚¨ë‹¤. Roomì€ ë§¤ê°œ ë³€ìˆ˜ ì´ë¦„ì„ ì‚¬ìš©í•˜ì—¬ ë§¤ì¹˜ë¥¼ ìˆ˜í–‰í•œë‹¤. ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš° ì•± ì»´íŒŒì¼ ì‹œ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.</li>
<li>ë‹¤ìŒê³¼ ê°™ì´ ì—¬ëŸ¬ ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬í•˜ê±°ë‚˜ ì¡°íšŒì—ì„œ ì—¬ëŸ¬ ë²ˆ ì°¸ì¡°í•  ìˆ˜ë„ ìˆë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT * FROM user WHERE age BETWEEN :minAge AND :maxAge"</span>)</span><br><span class="line">    <span class="keyword">public</span> User[] loadAllUsersBetweenAges(<span class="keyword">int</span> minAge, <span class="keyword">int</span> maxAge);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT * FROM user WHERE first_name LIKE :search "</span> +</span><br><span class="line">           <span class="string">"OR last_name LIKE :search"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findUserWithName</span><span class="params">(String search)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>6. Returning subsets of columns</strong></p>
<ul>
<li>ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì—”í‹°í‹°ì˜ ëª‡ ê°€ì§€ í•„ë“œë§Œ ìˆìœ¼ë©´ ëœë‹¤.</li>
<li>ì˜ˆë¥¼ ë“¤ì–´ UIëŠ” ì‚¬ìš©ìì— ëŒ€í•œ ëª¨ë“  ì„¸ë¶€ ì •ë³´ê°€ ì•„ë‹ˆë¼ ì‚¬ìš©ìì˜ ì„±ê³¼ ì´ë¦„ë§Œ í‘œì‹œí•  ìˆ˜ ìˆë‹¤. ì•±ì˜ UIì— í‘œì‹œë˜ëŠ” ì—´ë§Œ ê°€ì ¸ì˜¤ë©´ ë¦¬ì†ŒìŠ¤ê°€ ì ˆì•½ë˜ê³  ì¿¼ë¦¬ê°€ ë” ë¹¨ë¦¬ ì™„ë£Œëœë‹¤.</li>
<li>Roomì„ ì‚¬ìš©í•˜ë©´ ê²°ê³¼ Column ì§‘í•©ì„ ë°˜í™˜ë  ê°œì²´ë¡œ ë§¤í•‘í•  ìˆ˜ ìˆëŠ” ì¿¼ë¦¬ì—ì„œ Java ê¸°ë°˜ ê°œì²´ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Java Object</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NameTuple</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"first_name"</span>)</span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"last_name"</span>)</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Query ë©”ì†Œë“œì—ì„œ ì´ ìë°” ê°ì²´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT first_name, last_name FROM user"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;NameTuple&gt; <span class="title">loadFullName</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Roomì€ ì¿¼ë¦¬ê°€ first_name, last_name ì—´ì— ëŒ€í•œ ê°’ì„ ë°˜í™˜í•˜ê³  ì´ëŸ¬í•œ ê°’ì„ NameTuple í´ë˜ìŠ¤ì˜ í•„ë“œì— ë§¤í•‘í•  ìˆ˜ ìˆìŒì„ ì´í•´í•œë‹¤.</li>
<li>ë”°ë¼ì„œ ë£¸ì—ì„œ ì ì ˆí•œ ì½”ë“œë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.</li>
<li>ì¿¼ë¦¬ê°€ ë„ˆë¬´ ë§ì€ ì—´ì„ ë°˜í™˜í•˜ê±°ë‚˜ NameTuple í´ë˜ìŠ¤ì— ì—†ëŠ” ì—´ì„ ë°˜í™˜í•˜ë©´ ë£¸ì— ê²½ê³ ê°€ í‘œì‹œëœë‹¤.</li>
</ul>
<p><strong>7. Passing a collection of arguments</strong></p>
<ul>
<li>ì¼ë¶€ ì¿¼ë¦¬ëŠ” ëŸ°íƒ€ì„ê¹Œì§€ ì•Œ ìˆ˜ ì—†ëŠ” ì •í™•í•œ ìˆ˜ì˜ ë§¤ê°œ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§ì€ ë§¤ê°œ ë³€ìˆ˜ë¥¼ ì „ë‹¬í•´ì•¼ í•  ìˆ˜ ìˆë‹¤.</li>
<li>ì˜ˆë¥¼ ë“¤ì–´, regionsì˜ í•˜ìœ„ ì§‘í•©ì—ì„œ ëª¨ë“  ì‚¬ìš©ìì— ëŒ€í•œ ì •ë³´ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆë‹¤.</li>
<li>Roomì€ ë§¤ê°œë³€ìˆ˜ê°€ ì§‘í•©ì„ ë‚˜íƒ€ë‚´ëŠ” ì‹œì ì„ íŒŒì•…í•˜ê³  ì œê³µëœ ë§¤ê°œë³€ìˆ˜ ìˆ˜ì— ë”°ë¼ ëŸ°íƒ€ì„ì— ë§¤ê°œë³€ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ í™•ì¥í•œë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT first_name, last_name FROM user WHERE region IN (:regions)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;NameTuple&gt; <span class="title">loadUsersFromRegions</span><span class="params">(List&lt;String&gt; regions)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>8. Observable queries</strong></p>
<ul>
<li>ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•˜ë©° ë°ì´í„°ê°€ ë³€ê²½ë  ë•Œ ì•±ì˜ UIê°€ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ë˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.</li>
<li>ì´ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ì¿¼ë¦¬ ë©”ì†Œë“œ descriptionì— <strong>LiveData</strong> ìœ í˜•ì˜ ë°˜í™˜ ê°’ì„ ì‚¬ìš©í•œë‹¤.</li>
<li>Roomì€ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì—…ë°ì´íŠ¸ë  ë•Œ LiveDataë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ”ë° í•„ìš”í•œ ëª¨ë“  ì½”ë“œë¥¼ ìƒì„±í•œë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT first_name, last_name FROM user WHEHE region IN (:regions)"</span>)</span><br><span class="line">    <span class="keyword">public</span> LiveData&lt;List&lt;User&gt;&gt; loadUserFromRegionsSync(List&lt;String&gt; regions);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>9. Reactive queries with RxJava</strong></p>
<p>ì¶”ê°€ ì˜ˆì •~~</p>
<h3 id="ì—°ìŠµí•´ë³´ê¸°">[ì—°ìŠµí•´ë³´ê¸°]</h3>
<ul>
<li><code>Entity</code> : databaseì˜ rowì™€ mappingë˜ëŠ” class. ì¦‰, tableì˜ êµ¬ì¡°ë¥¼ ë‚˜íƒ€ë‚´ëŠ”ë° Databaseì—ì„œ <strong>entities</strong> í•¨ìˆ˜ë¥¼ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<p>@Ignoreë¥¼ ë¶™ì´ì§€ ì•ŠëŠ”í•œ DBì— ì§€ì†ì ìœ¼ë¡œ ìœ ì§€ëœë‹¤.<br>
entityëŠ” empty ìƒì„±ìë‚˜, ë¶€ë¶„ fieldë§Œ ê°–ëŠ” ìƒì„±ì, full fieldì— ëŒ€í•œ ìƒì„±ì ëª¨ë‘ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.</p>
<ul>
<li><code>DAO</code> : databaseë¥¼ ì ‘ê·¼í•˜ëŠ” í•¨ìˆ˜ë“¤ì´ ì •ì˜ë˜ëŠ” class or interfaceì´ë‹¤. @Databaseë¡œ ì •ì˜ëœ classëŠ” ë‚´ë¶€ì— ì¸ìê°€ ì—†ê³  @Dao annotationì´ ë˜ì–´ ìˆëŠ” classë¥¼ returní•˜ëŠ” abstract í•¨ìˆ˜ë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤.</li>
</ul>
<p>ì•„ë˜ì˜ ì˜ˆì œëŠ” í•˜ë‚˜ì˜ entityì™€ í•˜ë‚˜ì˜ Daoë¥¼ ê°–ëŠ” í˜•íƒœì´ë‹¤.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// User.java</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> uid;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"first_name"</span>)</span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"last_name"</span>)</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ìƒëµ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UserDao.java</span></span><br><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT * FROM user"</span>) </span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getAll</span><span class="params">()</span></span>; </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT * FROM user WHERE uid IN (:userIds)"</span>) </span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">loadAllByIds</span><span class="params">(<span class="keyword">int</span>[] userIds)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT * FROM user WHERE first_name LIKE :first AND "</span> + <span class="string">"last_name LIKE :last LIMIT 1"</span>) </span><br><span class="line">    <span class="function">User <span class="title">findByName</span><span class="params">(String first, String last)</span></span>; </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Insert</span> <span class="keyword">void</span> </span><br><span class="line">    insertAll(User... users); </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Delete</span> <span class="keyword">void</span> </span><br><span class="line">    delete(User user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AppDatabase.java</span></span><br><span class="line"><span class="meta">@Database</span>(entities = &#123;User.class&#125;, version = <span class="number">1</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AppDatabase</span> <span class="keyword">extends</span> <span class="title">RoomDatabase</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> UserDao <span class="title">userDao</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ìœ„ 3ê°œì˜ classê°€ ì™„ì„±ë˜ë©´ ì•„ë˜ì™€ ê°™ì´ DBì˜ instanceë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AppDatabase db = Roo.databaseBuilder(getApplicationContext(), AppDatabase.class, <span class="string">"database-name"</span>).build();</span><br></pre></td></tr></table></figure>
<p><code>AppDatabase objectë¥¼ ìƒì„±í•˜ëŠ” ì½”ë“œëŠ” ë¹„ìš©ì´ ë§ì´ ë“¤ê¸° ë•Œë¬¸ì— ì‹±ê¸€í†¤ìœ¼ë¡œ êµ¬í˜„í•´ì•¼ í•œë‹¤.</code></p>
<h2 id="entities">Entities</h2>
<p>@Databaseì˜ annotationì— ì†ì„±ìœ¼ë¡œ í¬í•¨ëœ entitiyëŠ” ì‹¤ì œ @Entity annotationì„ ë¶™ì¸ classë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì´ëŠ” ê° tableë¡œ ìƒì„±ë˜ë©°, ì‹¤ì œ columeìœ¼ë¡œ ë§Œë“¤ê³  ì‹¶ì§€ ì•Šì€ fieldê°€ ìˆë‹¤ë©´ <code>@Ignore</code>ë¥¼ ë¶™ì¸ë‹¤.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    Bitmap picture;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>FieldëŠ” public í˜•íƒœì´ì–´ì•¼ í•˜ë©°, privateìœ¼ë¡œ í•  ê²½ìš° getterì™€ setterë¥¼ java beans conventionì— ë”°ë¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.</p>
<h2 id="primary-key">Primary Key</h2>
<p>columnì´ í•˜ë‚˜ë¼ë„ PKëŠ” ì§€ì •ë˜ì–´ì•¼ í•œë‹¤. @PrimaryKey annotationì„ ì´ìš©í•˜ê±°ë‚˜ ë³µí•© PKì˜ ê²½ìš° @Entity ì†ì„±ìœ¼ë¡œ primarykeysë¥¼ ì´ìš©í•œë‹¤.</p>
<p>ë˜í•œ, Idë¥¼ autogenerateí•˜ë ¤ë©´ @PrimaryKey ì†ì„±ì— <code>autoGenerate</code> ì†ì„±(true)ì„ ë„£ëŠ”ë‹¤.</p>
<p>ì¶”ê°€ì ìœ¼ë¡œ class ì´ë¦„ì€ table ëª…ì´ ëœë‹¤. table ëª…ì„ ë°”ê¾¸ê³  ì‹¶ë‹¤ë©´ @Entity ì†ì„±ìœ¼ë¡œ <code>tableName</code>ì„ ë„£ìœ¼ë©´ ëœë‹¤.</p>
<p>ë§Œì•½ field ì´ë¦„ì„ columnìœ¼ë¡œ ì“°ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ <code>@ColumnInfo</code>ë¡œ í‘œê¸°í•´ì•¼ í•œë‹¤.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ë³µí•© PK ì‚¬ìš©ì‹œ</span></span><br><span class="line"><span class="meta">@Entity</span>(primaryKeys = &#123;<span class="string">"firstName"</span>, <span class="string">"lastName"</span>&#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    Bitmap picture;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// í…Œì´ë¸” ì´ë¦„ì„ ì§ì ‘ ì§€ì •í•  ë•Œ</span></span><br><span class="line"><span class="meta">@Entity</span>(tableName = <span class="string">"users"</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="comment">// ìƒëµ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Columnì„ ì§ì ‘ ì§€ì •í•  ë•Œ</span></span><br><span class="line"><span class="meta">@Entity</span>(tableName = <span class="string">"users"</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> uid;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"first_name"</span>)</span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"last_name"</span>)</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    Bitmap picture;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="indices-and-uniqueness">Indices and uniqueness</h2>
<p>IndextëŠ” ì•„ë˜ì™€ ê°™ì´ ë§Œë“¤ ìˆ˜ ìˆë‹¤.(ê²°í•© indexë„ ìƒì„± ê°€ëŠ¥)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span>(indices = &#123;<span class="meta">@Index</span>(<span class="string">"name"</span>),<span class="meta">@Index</span>(value = &#123;<span class="string">"last_name"</span>,<span class="string">"address"</span>&#125;)&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Users</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> uid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line">    <span class="keyword">public</span> String address;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"last_name"</span>)</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    Bitmap picture;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Unique ì œì•½ ì¡°ê±´ì€ ì•„ë˜ì™€ ê°™ì´ í‘œê¸°í•  ìˆ˜ ìˆë‹¤.</li>
<li>ì˜ˆì œ) ê²°í•© ì¡°ê±´ì— ëŒ€í•œ unique index</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span>(indices = &#123;<span class="meta">@Index</span>(value = &#123;<span class="string">"first_name"</span>, <span class="string">"last_name"</span>&#125;,</span><br><span class="line">        unique = <span class="keyword">true</span>)&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Users</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> uid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"first_name"</span>)</span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"last_name"</span>)</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    Bitmap picture;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>foreignKeyë„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span>(foreignKeys = <span class="meta">@ForeignKey</span>(entity = User.class,</span><br><span class="line">        parentColumns = <span class="string">"id"</span>,</span><br><span class="line">        childColumns = <span class="string">"user_od"</span>))</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> bookId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"user_id"</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> useerId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="nested-objects">Nested objects</h2>
<p>Entity í´ë˜ìŠ¤ê°€ fieldë¡œ objectë¥¼ ê°–ëŠ” ê²½ìš° <code>@Embeded</code>ë¥¼ ì‚¬ìš©í•œë‹¤. ë‹¨, í•´ë‹¹ tableì—ëŠ” Embededëœ í´ë˜ìŠ¤ì˜ columnë„ ë˜‘ê°™ì€ í•˜ë‚˜ì˜ columnìœ¼ë¡œ ì·¨ê¸‰ëœë‹¤.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Address</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String street;</span><br><span class="line">    <span class="keyword">public</span> String state; <span class="keyword">public</span> String city;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"post_code"</span>) </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> postCode;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Embeded</span></span><br><span class="line">    <span class="keyword">public</span> Address address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ì¦‰, ìœ„ ì˜ˆì œì—ì„œ User tableì—ëŠ” id, firstName, street, state, city, post_cde ì»¬ëŸ¼ì´ ì¡´ì¬í•œë‹¤. Embeded ì•ˆì—ì„œ embededë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©°, ë§Œì•½ column ì´ë¦„ì´ ì¤‘ë³µë˜ëŠ” ê²½ìš° <code>prefix</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ uniqueí•˜ê²Œ column ì´ë¦„ì„ ì„¤ì •í•œë‹¤.</p>
<h2 id="daodata-access-objectsdaos">DAO(Data Access Objects)(DAOs)</h2>
<p>DaoëŠ” abstract classë‚˜ interfaceê°€ ë  ìˆ˜ ìˆë‹¤. RoomDatabaseë¥¼ ì¸ìë¡œ ë°›ëŠ” ìƒì„±ìë¥¼ ë§Œë“œëŠ” ê²½ìš°ì—ë§Œ abstract classê°€ ë  ìˆ˜ ìˆë‹¤. Roomì€ ì ˆëŒ€ë¡œ main threadì—ì„œ query ì‘ì—…ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤. <code>allowMainThreadQueries()</code>ë¥¼ í˜¸ì¶œí•˜ë”ë¼ë„ ë¶ˆê°€ëŠ¥í•˜ë‹¤.<br>
LiveDataëŠ” returní•˜ëŠ” ë¹„ë™ê¸° queryì˜ ê²½ìš°ì—ëŠ” ê°€ëŠ¥í•˜ë‹¤.(ì–´ì°¨í”¼ backgroundì—ì„œ ìˆ˜í–‰ë˜ë¯€ë¡œ) - ë¬´ìŠ¨ ë§ì´ì§€â€¦?</p>
<h3 id="insert">Insert</h3>
<p>@Insertë¡œ í‘œê¸°í•˜ë©°, single transactionìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Insert</span>(onConflict = OnConflictStrategy.REPLACE)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertUsers</span><span class="params">(User... users)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertBothUser</span><span class="params">(User user1, User user2)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertUsersAndFriends</span><span class="params">(User user, List&lt;User&gt; friends)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Entityë¡œ ì •ì˜ëœ classë§Œ ì¸ìë¡œ ë°›ê±°ë‚˜, ê·¸ classì˜ collection ë˜ëŠ” arrayë§Œ ì¸ìë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤. ë˜í•œ, ì¸ìê°€ í•˜ë‚˜ì¸ ê²½ìš° long typeì˜ return(insertëœ ê°’ì˜ rowId)ì„ ë°›ì„ ìˆ˜ ìˆê³ , ì—¬ëŸ¬ ê°œì¸ ê²½ìš° long[], List<long>ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.</long></p>
<h3 id="update">Update</h3>
<p>Updateë¥¼ ì‚¬ìš©í•˜ì—¬ Entity setì„ update í•œë‹¤. return ê°’ìœ¼ë¡œ ë³€ê²½ëœ rows ìˆ˜ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤. updateëŠ” PK ê¸°ì¤€ìœ¼ë¡œ í•œë‹¤.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Update</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUsers</span><span class="params">(User... user)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="delete">Delete</h3>
<p><code>Delete</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ Entity setì„ delete í•œë‹¤. return ê°’ìœ¼ë¡œ ë³€ê²½ëœ rows ìˆ˜ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤. ì‚­ì œ keyëŠ” PKë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•œë‹¤.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Delete</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUsers</span><span class="params">(User... users)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="query">Query</h3>
<p><code>@Query</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ DBë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. compile timeì— returnë˜ëŠ” objectì˜ fieldì™€ sql ê²°ê³¼ë¡œ ë‚˜ì˜¤ëŠ” columnì˜ ì´ë¦„ì´ ë§ëŠ”ì§€ í™•ì¸í•˜ì—¬ ì¼ë¶€ê°€ matchë˜ë©´ warning, match ë˜ëŠ”ê²Œ ì—†ë‹¤ë©´ errorë¥¼ ë³´ë‚¸ë‹¤.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT * FROM user"</span>)</span><br><span class="line">    <span class="keyword">public</span> User[] loadAllUsers();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>selectë¬¸ì— parameterê°€ ë“¤ì–´ê°€ì•¼ í•˜ëŠ” ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ë„£ì„ ìˆ˜ ìˆë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT * FROM user WHERE age &gt; :minAge"</span>)</span><br><span class="line">    <span class="keyword">public</span> User[] loadAllUsersOlderThan(<span class="keyword">int</span> minAge);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ì•„ë˜ì™€ ê°™ì´ ì—¬ëŸ¬ ê°œì˜ parameterë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span> <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span> </span>&#123; </span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT * FROM user WHERE age BETWEEN :minAge AND :maxAge"</span>) </span><br><span class="line">    <span class="keyword">public</span> User[] loadAllUsersBetweenAges(<span class="keyword">int</span> minAge, <span class="keyword">int</span> maxAge); </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT * FROM user WHERE first_name LIKE :search "</span> + <span class="string">"OR last_name LIKE :search"</span>) </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findUserWithName</span><span class="params">(String search)</span></span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ë§Œì•½ ì¼ë¶€ ì»¬ëŸ¼ë§Œ ì¡°íšŒí•˜ê³  ì‹¶ë‹¤ë©´ ë”°ë¡œ return classë¥¼ ë§Œë“¤ì–´ì„œ ìš”ì²­í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// return ë°›ì„ classë¥¼ ì •ì˜</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NameTuple</span></span>&#123;</span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"first_name"</span>)</span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name=<span class="string">"last_name"</span>) </span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT first_name, last_name FROM user"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;NameTuple&gt; <span class="title">loadFullName</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ë˜í•œ, ì •í•´ì§€ì§€ ì•Šì€ ê°œìˆ˜ì˜ parameterê°€ ë„˜ì–´ê°€ì•¼ í•˜ëŠ” ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ìˆ˜í–‰ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDao</span> </span>&#123; </span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT first_name, last_name FROM user WHERE region IN (:regions)"</span>) </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;NameTuple&gt; <span class="title">loadUsersFromRegions</span><span class="params">(List&lt;String&gt; regions)</span></span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ê¸°íƒ€ ë“±ë“±ì˜ ê¸°ëŠ¥ë“¤ì„ í¬í•¨í•˜ê³  ìˆë‹¤. í•˜ì§€ë§Œ, ì•„ë˜ëŠ” í•„ìš”ì— ë”°ë¼ ì°¾ì•„ë³´ë©´ì„œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ ë  ê²ƒ ê°™ë‹¤.</p>
<h3 id="using-tye-converters">Using tye converters</h3>
<p>Roomì€ primitive type(ì›ì‹œ íƒ€ì… ex. int, String ë“±ë“±)ê³¼ ê·¸ wrapping íƒ€ì…ë§Œ ì§€ì›í•œë‹¤. í•˜ì§€ë§Œ, ê·¸ ì™¸ì— typeì„ ì‚¬ìš©í•  ê²½ìš° <strong>TypeConverter</strong>ë¥¼ ì‚¬ìš©í•˜ì—¬ typeì„ ì¹˜í™˜í•´ì•¼ í•œë‹¤.</p>
<p>ì˜ˆë¥¼ ë“¤ì–´, DBì—ì„œëŠ” timestampë¡œ ë˜ì–´ ìˆê³ , java codeì—ì„œëŠ” Date classë¡œ ë˜ì–´ ìˆëŠ” ê²½ìš° ìš°ì„  ì•„ë˜ì™€ ê°™ì´ <code>converter</code>ë¥¼ ë§Œë“ ë‹¤.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Converters</span></span>&#123;</span><br><span class="line">    <span class="meta">@TypeConverter</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">fromTimestamp</span><span class="params">(Long value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value == <span class="keyword">null</span>? <span class="keyword">null</span> : <span class="keyword">new</span> Date(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TypeConverter</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title">dateToTimestamp</span><span class="params">(Date date)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> date == <span class="keyword">null</span>? <span class="keyword">null</span> : date.getTime();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ì´ ë‘ê°œì˜ converting í•¨ìˆ˜ëŠ” ì„œë¡œ converting í•´ì£¼ê³  ìˆë‹¤.</li>
<li><code>@TypeConverters</code>ë¥¼ ì´ìš©í•˜ì—¬ ì ìš©í•  ê³³ì— ë„£ëŠ”ë‹¤.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AppDatabase.java</span></span><br><span class="line"><span class="meta">@Database</span>(entities = &#123;User.java&#125;, version= <span class="number">1</span>)</span><br><span class="line"><span class="meta">@TypeConverters</span>(&#123;Converters.class&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AppDatabase</span> <span class="keyword">extends</span> <span class="title">RoomDatabase</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> UserDao <span class="title">userDao</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// User.java</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// UserDao.java</span></span><br><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT * FROM user WHERE birthday BETWEEN :from AND :to"</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findUsersBornBetweenDates</span><span class="params">(Date from, Date to)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>@TypeConverterë¥¼ ì§€ì •í•˜ëŠ” ìœ„ì¹˜ì— ë”°ë¼ scopeì´ ë‹¬ë¼ì§„ë‹¤.</li>
<li>ì˜ˆì œì²˜ëŸ¼ Databaseì— ë„£ìœ¼ë©´ Daoì™€ entity ëª¨ë‘ ì˜í–¥ì„ ë°›ëŠ”ë‹¤.</li>
<li>Daoë‚˜ Entity, POJOì— ë„£ì„ ìˆ˜ë„ ìˆê³ , Entityì˜ íŠ¹ì • field, Daoì˜ íŠ¹ì • method or íŠ¹ì • parameterì— ë„£ì„ ìˆ˜ ìˆë‹¤.</li>
</ul>
<h3 id="database-migration">Database migration</h3>
<p>database migrationì´ í•„ìš”í•œ ê²½ìš° entity classì— ìˆ˜ì • í•­ëª©ì„ ë°˜ì˜í•´ì•¼ í•œë‹¤. ë˜í•œ ë°ì´í„°ë¥¼ ë‚ ë¦¬ì§€ ì•Šê¸° ìœ„í•´ì„œ mirgrationì„ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.</p>
<p>migrationì„ ë“±ë¡í•˜ë©´, runtimeì— migrationì„ ìˆ˜í–‰í•˜ë©° ì •í•´ë†“ì€ ìˆœì„œëŒ€ë¡œ migrationì´ ê°€ëŠ¥í•˜ë‹¤. migrationì„ ë“±ë¡í•  ë•ŒëŠ” <strong>ì‹œì‘ ë²„ì „ê³¼ ë ë²„ì „ì„ ë„£ì–´ì•¼ í•œë‹¤.</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Room.databaseBuilder(getApplicationContext(), MyDb.class, <span class="string">"database-name"</span>).addMigrations(MIGRATION_1_2, MIGRATION_2_3).build();</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> Migration MIGRATION_1_2 = <span class="keyword">new</span> Migration(<span class="number">1</span>,<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">migrate</span><span class="params">(SupportSQLiteDatabase database)</span> </span>&#123; </span><br><span class="line">        database.execSQL(<span class="string">"CREATE TABLE `Fruit` (`id` INTEGER, "</span> + <span class="string">"`name` TEXT, PRIMARY KEY(`id`))"</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> Migration MIGRATION_2_3 = <span class="keyword">new</span> Migration(<span class="number">2</span>, <span class="number">3</span>) &#123; </span><br><span class="line">    <span class="meta">@Override</span> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">migrate</span><span class="params">(SupportSQLiteDatabase database)</span> </span>&#123; </span><br><span class="line">        database.execSQL(<span class="string">"ALTER TABLE Book "</span> + <span class="string">" ADD COLUMN pub_year INTEGER"</span>); </span><br><span class="line">        &#125; </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>migration ì½”ë“œê°€ ì—†ìœ¼ë©´ Roomì€ DBë¥¼ ê·¸ëƒ¥ rebuildí•œë‹¤.</code>(ê¸°ì¡´ ë°ì´í„°ëŠ” ë‚ ì•„ê°„ë‹¤.)</li>
<li>ë˜í•œ, migrationì— ë“¤ì–´ê°€ëŠ” queryëŠ” ìƒìˆ˜ì— ë„£ì§€ë§ê³ , ì§ì ‘ ë„£ëŠ”ê²Œ migration ë¡œì§ì„ ìœ ì§€í•˜ëŠ”ë°ë” ì¢‹ë‹¤.</li>
<li>migrationì´ ëë‚˜ê³  ë‚˜ë©´, schemaì— ëŒ€í•œ ìœ íš¨ì„±ì„ í™•ì¸ì„ í•˜ê³ , ë¬¸ì œê°€ ìˆì„ ê²½ìš° mismatchëœ ë¶€ë¶„ì— ì •ë³´ë¥¼ ë‹´ì€ exceptionì„ ë°œìƒ ì‹œí‚¨ë‹¤.</li>
</ul>
<h2 id="ì°¸ê³ ">ì°¸ê³ </h2>
<ul>
<li><a href="https://tourspace.tistory.com/28" target="_blank" rel="noopener">Android Architecture Components #6 - Room</a></li>
<li><a href="https://developer.android.com/training/data-storage/room/defining-data#java" target="_blank" rel="noopener">Defining data using Room entities</a></li>
<li><a href="https://developer.android.com/training/data-storage/room/#java" target="_blank" rel="noopener">Save data in a local database using Room</a></li>
</ul>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/AAC/">AAC</a> <a class="tag tag--primary tag--small t-link" href="/tags/Android/">Android</a> <a class="tag tag--primary tag--small t-link" href="/tags/Basic/">Basic</a> <a class="tag tag--primary tag--small t-link" href="/tags/Room/">Room</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/01/26/Java-Singleton-Pattern/"
                    data-tooltip="[Java] Javaì—ì„œì˜ Singleton"
                    aria-label="PREVIOUS: [Java] Javaì—ì„œì˜ Singleton"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/01/24/Etc-Git-Issue-Use/"
                    data-tooltip="4ì¼ì°¨ [Git] Issue íƒ­ ì´ìš©í•˜ê¸°"
                    aria-label="NEXT: 4ì¼ì°¨ [Git] Issue íƒ­ ì´ìš©í•˜ê¸°"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://woovictory.github.io/2019/01/25/Android-Room-Basic/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://woovictory.github.io/2019/01/25/Android-Room-Basic/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://woovictory.github.io/2019/01/25/Android-Room-Basic/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 VictoryWoo. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/01/26/Java-Singleton-Pattern/"
                    data-tooltip="[Java] Javaì—ì„œì˜ Singleton"
                    aria-label="PREVIOUS: [Java] Javaì—ì„œì˜ Singleton"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/01/24/Etc-Git-Issue-Use/"
                    data-tooltip="4ì¼ì°¨ [Git] Issue íƒ­ ì´ìš©í•˜ê¸°"
                    aria-label="NEXT: 4ì¼ì°¨ [Git] Issue íƒ­ ì´ìš©í•˜ê¸°"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://woovictory.github.io/2019/01/25/Android-Room-Basic/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://woovictory.github.io/2019/01/25/Android-Room-Basic/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://woovictory.github.io/2019/01/25/Android-Room-Basic/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="2">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://woovictory.github.io/2019/01/25/Android-Room-Basic/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://woovictory.github.io/2019/01/25/Android-Room-Basic/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://woovictory.github.io/2019/01/25/Android-Room-Basic/"
                        aria-label="Share on Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/Victory.jpeg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">VictoryWoo</h4>
        
            <div id="about-card-bio"><p>ê¸°ë¡ì„ í†µí•´ ì‚¬ëŒë“¤ê³¼ ê³µìœ í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Android Developer</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/color_blue.jpeg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://woovictory.github.io/2019/01/25/Android-Room-Basic/';
              
            this.page.identifier = '2019/01/25/Android-Room-Basic/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'https-woovictory-github-io';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    </body>
</html>
